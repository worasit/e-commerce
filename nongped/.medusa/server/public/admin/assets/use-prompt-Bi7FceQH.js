import{r as e,z as h,x as v,bG as k}from"./index-CJZ0utKv.js";import{P as n}from"./prompt-Di3JszOJ.js";const b=({open:l,variant:u="danger",title:a,description:o,verificationText:t,verificationInstruction:s="Please type {val} to confirm:",cancelText:c="Cancel",confirmText:d="Confirm",onConfirm:E,onCancel:p})=>{const[i,y]=e.useState(""),P=r=>{y(r.target.value)},f=e.useMemo(()=>t?i===t:!0,[i,t]),C=r=>{r.preventDefault(),t&&f&&E()};e.useEffect(()=>{const r=g=>{g.key==="Escape"&&l&&p()};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[p,l]);let m=s.includes("{val}")?s.split("{val}"):["Please type","to confirm:"];return m.length!==2&&(m=["Please type","to confirm:"]),e.createElement(n,{open:l,variant:u},e.createElement(n.Content,null,e.createElement("form",{onSubmit:C},e.createElement(n.Header,null,e.createElement(n.Title,null,a),e.createElement(n.Description,null,o)),t&&e.createElement("div",{className:"border-ui-border-base mt-6 flex flex-col gap-y-4 border-y p-6"},e.createElement(h,{htmlFor:"verificationText",className:"text-ui-fg-subtle"},m[0]," ",e.createElement("span",{className:"text-ui-fg-base txt-compact-medium-plus"},t)," ",m[1]),e.createElement(v,{autoFocus:!0,autoComplete:"off",id:"verificationText",placeholder:t,onChange:P})),e.createElement(n.Footer,null,e.createElement(n.Cancel,{onClick:p},c),e.createElement(n.Action,{disabled:!f,type:t?"submit":"button",onClick:t?void 0:E},d)))))};b.displayName="RenderPrompt";const N=()=>async u=>new Promise(a=>{let o=!0;const t=k(document.createElement("div")),s=()=>{o=!1,t.unmount(),a(!1),document.body.style.pointerEvents="auto"},c=()=>{o=!1,a(!0),t.unmount(),document.body.style.pointerEvents="auto"};(()=>{t.render(e.createElement(b,{open:o,onConfirm:c,onCancel:s,...u}))})()});export{N as u};
