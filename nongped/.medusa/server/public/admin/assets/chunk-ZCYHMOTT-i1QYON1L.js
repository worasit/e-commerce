import{f as j,M as Ie,u as ve,a as Q,K as be,P as we,D as Ee,g as Se,S as Oe,v as De,b as je,d as U,h as _e,i as Ce,c as Me,C as H,j as X}from"./sortable.esm-BpoPRfbd.js";import{r as a,j as c,m as L,I as te,aj as Ae,Y as Ne,aC as $e}from"./index-CJZ0utKv.js";import{D as ke}from"./dots-six-LZonuE6Q.js";import{F as Pe}from"./folder-illustration-CIrEteBd.js";var Re=Object.defineProperty,z=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,Z=(e,t,n)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Le=(e,t)=>{for(var n in t||(t={}))ne.call(t,n)&&Z(e,n,t[n]);if(z)for(var n of z(t))re.call(t,n)&&Z(e,n,t[n]);return e},ze=(e,t)=>{var n={};for(var r in e)ne.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&z)for(var r of z(e))t.indexOf(r)<0&&re.call(e,r)&&(n[r]=e[r]);return n};const ae=a.forwardRef((e,t)=>{var n=e,r=ze(n,["color"]);return a.createElement("svg",Le({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:t},r),a.createElement("g",{clipPath:"url(#a)"},a.createElement("path",{fill:"#60A5FA",fillRule:"evenodd",d:"M13.935 11.15a2.32 2.32 0 0 1-2.318 2.32H3.383a2.32 2.32 0 0 1-2.318-2.32V3.785a2.32 2.32 0 0 1 2.318-2.318h1.691c.704 0 1.368.319 1.808.867l.348.433h4.387a2.32 2.32 0 0 1 2.318 2.318z",clipRule:"evenodd"}),a.createElement("path",{fill:"url(#b)",fillOpacity:.15,fillRule:"evenodd",d:"M13.935 11.15a2.32 2.32 0 0 1-2.318 2.32H3.383a2.32 2.32 0 0 1-2.318-2.32V3.785a2.32 2.32 0 0 1 2.318-2.318h1.691c.704 0 1.368.319 1.808.867l.348.433h4.387a2.32 2.32 0 0 1 2.318 2.318z",clipRule:"evenodd"}),a.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.15,strokeWidth:.5,d:"M7.034 2.922a.25.25 0 0 0 .196.094h4.387c1.142 0 2.068.926 2.068 2.068v6.067a2.07 2.07 0 0 1-2.068 2.068H3.383a2.07 2.07 0 0 1-2.068-2.068V3.784c0-1.142.926-2.068 2.068-2.068h1.691c.628 0 1.22.284 1.613.773z"}),a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd",filter:"url(#c)"},a.createElement("path",{fill:"#60A5FA",d:"M2.041 5.734h10.917a1.95 1.95 0 0 1 1.884 2.452l-.955 3.578a2.38 2.38 0 0 1-2.302 1.77h-8.17a2.38 2.38 0 0 1-2.303-1.77L.158 8.186A1.95 1.95 0 0 1 2.04 5.734z"}),a.createElement("path",{fill:"url(#d)",fillOpacity:.2,d:"M2.041 5.734h10.917a1.95 1.95 0 0 1 1.884 2.452l-.955 3.578a2.38 2.38 0 0 1-2.302 1.77h-8.17a2.38 2.38 0 0 1-2.303-1.77L.158 8.186A1.95 1.95 0 0 1 2.04 5.734z"}))),a.createElement("defs",null,a.createElement("linearGradient",{id:"b",x1:7.5,x2:7.5,y1:1.466,y2:13.469,gradientUnits:"userSpaceOnUse"},a.createElement("stop",null),a.createElement("stop",{offset:1,stopOpacity:0})),a.createElement("linearGradient",{id:"d",x1:7.5,x2:7.5,y1:5.734,y2:13.534,gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#fff"}),a.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),a.createElement("clipPath",{id:"a"},a.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"})),a.createElement("filter",{id:"c",width:14.817,height:7.8,x:.091,y:5.734,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},a.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),a.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),a.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),a.createElement("feOffset",{dy:-.5}),a.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),a.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),a.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow_6347_12110"}),a.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),a.createElement("feOffset",{dy:.5}),a.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),a.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.2 0"}),a.createElement("feBlend",{in2:"effect1_innerShadow_6347_12110",result:"effect2_innerShadow_6347_12110"}))))});ae.displayName="FolderOpenIllustration";var Te=Object.defineProperty,T=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable,W=(e,t,n)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Be=(e,t)=>{for(var n in t||(t={}))se.call(t,n)&&W(e,n,t[n]);if(T)for(var n of T(t))oe.call(t,n)&&W(e,n,t[n]);return e},Fe=(e,t)=>{var n={};for(var r in e)se.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&T)for(var r of T(e))t.indexOf(r)<0&&oe.call(e,r)&&(n[r]=e[r]);return n};const ie=a.forwardRef((e,t)=>{var n=e,{color:r="currentColor"}=n,i=Fe(n,["color"]);return a.createElement("svg",Be({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:t},i),a.createElement("g",{clipPath:"url(#a)"},a.createElement("path",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.793 13.207A2.7 2.7 0 0 0 3.708 14m-1.915-.793A2.7 2.7 0 0 0 3.708 14m-1.915-.793A2.7 2.7 0 0 1 1 11.29V1.812C1 1.364 1.364 1 1.813 1h3.791c.449 0 .813.364.813.812v2.941M3.708 14a2.7 2.7 0 0 0 1.916-.793M3.708 14a2.7 2.7 0 0 0 1.916-.793M3.708 14h9.48a.813.813 0 0 0 .812-.813V9.396a.813.813 0 0 0-.812-.813h-2.941m-4.623 4.624 4.623-4.624m-4.623 4.624a2.7 2.7 0 0 0 .793-1.916V4.753m3.83 3.83 2.079-2.08a.81.81 0 0 0 0-1.148L9.645 2.673a.81.81 0 0 0-1.148 0l-2.08 2.08m-2.709 6.538h.006v.006h-.006z"})),a.createElement("defs",null,a.createElement("clipPath",{id:"a"},a.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});ie.displayName="Swatch";var Ve=/iPad|iPhone|iPod/.test(navigator.platform);function Ue(e,t){return Math.round(e/t)}function G(e,t,n,r,i){const o=e.findIndex(({id:g})=>g===n),u=e.findIndex(({id:g})=>g===t),m=e[u],I=U(e,u,o),d=I[o-1],D=I[o+1],E=Ue(r,i),x=m.depth+E,h=He({previousItem:d}),p=Ge({nextItem:D});let f=x;return x>=h?f=h:x<p&&(f=p),{depth:f,maxDepth:h,minDepth:p,parentId:b()};function b(){var v;return f===0||!d?null:f===d.depth?d.parentId:f>d.depth?d.id:((v=I.slice(0,o).reverse().find(C=>C.depth===f))==null?void 0:v.parentId)??null}}function He({previousItem:e}){return e?e.depth+1:0}function Ge({nextItem:e}){return e?e.depth:0}function le(e,t=null,n=0,r){return e.reduce((i,o,u)=>{const m=o[r]||[];return[...i,{...o,parentId:t,depth:n,index:u},...le(m,o.id,n+1,r)]},[])}function V(e,t){return le(e,void 0,void 0,t)}function Je(e,t,n){const r={id:"root",[n]:[]},i={[r.id]:r},o=e.map(m=>({...m,[n]:[]}));let u={id:null,parentId:null,index:0};if(o.forEach((m,I)=>{const{id:d,index:D,depth:E,parentId:x,...h}=m,p=m[n]||[],f=x??r.id,b=i[f]??Ke(o,f);if(i[d]={id:d,[n]:p},b[n].push({id:d,...h,[n]:p}),I===t){const g=b[n];u={id:m.id,parentId:b.id==="root"?null:b.id,index:g.length-1}}}),!u.id)throw new Error("Could not find item");return{items:r[n],update:u}}function Ke(e,t){return e.find(({id:n})=>n===t)}function de(e,t,n){for(const r of e){const{id:i}=r,o=r[n]||[];if(i===t)return r;if(o.length){const u=de(o,t,n);if(u)return u}}}function ce(e,t=0,n){return e.reduce((r,i)=>{const o=i[n]||[];return o.length?ce(o,r+1,n):r+1},t)}function Ye(e,t,n){const r=de(e,t,n),i=(r==null?void 0:r[n])||[];return r?ce(i,0,n):0}function qe(e,t,n){const r=[...t];return e.filter(i=>i.parentId&&r.includes(i.parentId)?((i[n]||[]).length&&r.push(i.id),!1):!0)}var Qe=[j.Down,j.Right,j.Up,j.Left],Xe=[j.Left,j.Right],Ze=(e,t)=>(n,{currentCoordinates:r,context:{active:i,over:o,collisionRect:u,droppableRects:m,droppableContainers:I}})=>{if(Qe.includes(n.code)){if(!i||!u)return;n.preventDefault();const{current:{items:d,offset:D}}=e;if(Xe.includes(n.code)&&(o!=null&&o.id)){const{depth:p,maxDepth:f,minDepth:b}=G(d,i.id,o.id,D,t);switch(n.code){case j.Left:if(p>b)return{...r,x:r.x-t};break;case j.Right:if(p<f)return{...r,x:r.x+t};break}return}const E=[];I.forEach(p=>{if(p!=null&&p.disabled||p.id===(o==null?void 0:o.id))return;const f=m.get(p.id);if(f)switch(n.code){case j.Down:u.top<f.top&&E.push(p);break;case j.Up:u.top>f.top&&E.push(p);break}});const x=_e({active:i,collisionRect:u,pointerCoordinates:null,droppableRects:m,droppableContainers:E});let h=Ce(x,"id");if(h===(o==null?void 0:o.id)&&x.length>1&&(h=x[1].id),h&&(o!=null&&o.id)){const p=m.get(i.id),f=m.get(h),b=I.get(h);if(p&&f&&b){const g=d.findIndex(({id:M})=>M===h),v=d[g],C=d.findIndex(({id:M})=>M===i.id),P=d[C];if(v&&P){const{depth:M}=G(d,i.id,h,(v.depth-P.depth)*t,t),k=g>C?1:-1;return{x:f.left+M*t,y:f.top+k*0}}}}}},fe=a.forwardRef(({childCount:e,clone:t,depth:n,disableSelection:r,disableInteraction:i,ghost:o,handleProps:u,indentationWidth:m,collapsed:I,onCollapse:d,style:D,value:E,disabled:x,wrapperRef:h,...p},f)=>c.jsx("li",{ref:h,style:{paddingLeft:`${m*n}px`},className:L("-mb-px list-none",{"pointer-events-none":i,"select-none":r,"[&:first-of-type>div]:border-t-0":!t}),...p,children:c.jsxs("div",{ref:f,style:D,className:L("bg-ui-bg-base transition-fg relative flex items-center gap-x-3 border-y px-6 py-2.5",{"border-l":n>0,"shadow-elevation-flyout bg-ui-bg-base w-fit rounded-lg border-none pr-6 opacity-80":t,"bg-ui-bg-base-hover z-[1] opacity-50":o,"bg-ui-bg-disabled":x}),children:[c.jsx(We,{...u,disabled:x}),c.jsx(tt,{collapsed:I,onCollapse:d,clone:t}),c.jsx(et,{childrenCount:e,collapsed:I,clone:t}),c.jsx(nt,{value:E}),c.jsx(rt,{clone:t,childrenCount:e})]})}));fe.displayName="TreeItem";var We=({listeners:e,attributes:t,disabled:n})=>c.jsx(te,{size:"small",variant:"transparent",type:"button",className:L("cursor-grab",{"cursor-not-allowed":n}),disabled:n,...t,...e,children:c.jsx(ke,{})}),et=({childrenCount:e,collapsed:t,clone:n})=>{const r=n?e&&e>1:e,i=n?!1:!t;return c.jsx("div",{className:"flex size-7 items-center justify-center",children:r?i?c.jsx(ae,{}):c.jsx(Pe,{}):c.jsx(ie,{className:"text-ui-fg-muted"})})},tt=({collapsed:e,onCollapse:t,clone:n})=>n?null:t?c.jsx(te,{size:"small",variant:"transparent",onClick:t,type:"button",children:c.jsx(Ae,{className:L("text-ui-fg-subtle transition-transform",{"rotate-90":!e})})}):c.jsx("div",{className:"size-7",role:"presentation"}),nt=({value:e})=>c.jsx("div",{className:"txt-compact-small text-ui-fg-subtle flex-grow truncate",children:e}),rt=({clone:e,childrenCount:t})=>!e||!t||e&&t<=1?null:c.jsx(Ne,{size:"2xsmall",color:"blue",className:"absolute -right-2 -top-2",children:t}),at=({isSorting:e,wasDragging:t})=>!(e||t);function ee({id:e,depth:t,disabled:n,...r}){const{attributes:i,isDragging:o,isSorting:u,listeners:m,setDraggableNodeRef:I,setDroppableNodeRef:d,transform:D,transition:E}=Me({id:e,animateLayoutChanges:at,disabled:n}),x={transform:H.Translate.toString(D),transition:E};return c.jsx(fe,{ref:I,wrapperRef:d,style:x,depth:t,ghost:o,disableSelection:Ve,disableInteraction:u,disabled:n,handleProps:{listeners:m,attributes:i},...r})}var st={droppable:{strategy:Ie.Always}},ot={keyframes({transform:e}){return[{opacity:1,transform:H.Transform.toString(e.initial)},{opacity:0,transform:H.Transform.toString({...e.final,x:e.final.x+5,y:e.final.y+5})}]},easing:"ease-out",sideEffects({active:e}){e.node.animate([{opacity:0},{opacity:1}],{duration:X.duration,easing:X.easing})}};function it({collapsible:e=!0,childrenProp:t="children",enableDrag:n=!0,items:r=[],indentationWidth:i=40,onChange:o,renderValue:u}){const[m,I]=a.useState({}),[d,D]=a.useState(null),[E,x]=a.useState(null),[h,p]=a.useState(0),[f,b]=a.useState(null),g=a.useMemo(()=>{const s=V(r,t),l=s.reduce((S,O)=>{const{id:w}=O,A=O[t]||[];return m[w]&&A.length?[...S,w]:S},[]);return qe(s,d?[d,...l]:l,t)},[d,r,t,m]),v=d&&E?G(g,d,E,h,i):null,C=a.useRef({items:g,offset:h}),[P]=a.useState(()=>Ze(C,i)),M=ve(Q(we),Q(be,{coordinateGetter:P})),J=a.useMemo(()=>g.map(({id:s})=>s),[g]),k=d?g.find(({id:s})=>s===d):null;a.useEffect(()=>{C.current={items:g,offset:h}},[g,h]);function K({active:{id:s}}){D(s),x(s);const l=g.find(({id:S})=>S===s);l&&b({parentId:l.parentId,overId:s}),document.body.style.setProperty("cursor","grabbing")}function Y({delta:s}){p(s.x)}function ue({over:s}){x((s==null?void 0:s.id)??null)}function pe({active:s,over:l}){if(q(),v&&l){const{depth:S,parentId:O}=v,w=JSON.parse(JSON.stringify(V(r,t))),A=w.findIndex(({id:y})=>y===l.id),_=w.findIndex(({id:y})=>y===s.id),N=w[_];w[_]={...N,depth:S,parentId:O};const $=U(w,_,A),{items:R,update:F}=Je($,A,t);o(F,R)}}function me(){q()}function q(){x(null),D(null),p(0),b(null),document.body.style.setProperty("cursor","")}function he(s){I(l=>({...l,[s]:!l[s]}))}function B(s,l,S){if(S&&v){if(s!=="onDragEnd"){if(f&&v.parentId===f.parentId&&S===f.overId)return;b({parentId:v.parentId,overId:S})}const O=JSON.parse(JSON.stringify(V(r,t))),w=O.findIndex(({id:y})=>y===S),A=O.findIndex(({id:y})=>y===l),_=U(O,A,w),N=_[w-1];let $;const R=s==="onDragEnd"?"dropped":"moved",F=s==="onDragEnd"?"dropped":"nested";if(N)if(v.depth>N.depth)$=`${l} was ${F} under ${N.id}.`;else{let y=N;for(;y&&v.depth<y.depth;){const xe=y.parentId;y=_.find(({id:ye})=>ye===xe)}y&&($=`${l} was ${R} after ${y.id}.`)}else{const y=_[w+1];$=`${l} was ${R} before ${y.id}.`}return $}}const ge={onDragStart({active:s}){return`Picked up ${s.id}.`},onDragMove({active:s,over:l}){return B("onDragMove",s.id,l==null?void 0:l.id)},onDragOver({active:s,over:l}){return B("onDragOver",s.id,l==null?void 0:l.id)},onDragEnd({active:s,over:l}){return B("onDragEnd",s.id,l==null?void 0:l.id)},onDragCancel({active:s}){return`Moving was cancelled. ${s.id} was dropped in its original position.`}};return c.jsx(Ee,{accessibility:{announcements:ge},sensors:M,collisionDetection:Se,measuring:st,onDragStart:K,onDragMove:Y,onDragOver:ue,onDragEnd:pe,onDragCancel:me,children:c.jsxs(Oe,{items:J,strategy:De,children:[g.map(s=>{const{id:l,depth:S}=s,O=s[t]||[],w=typeof n=="function"?!n(s):!n;return c.jsx(ee,{id:l,value:u(s),disabled:w,depth:l===d&&v?v.depth:S,indentationWidth:i,collapsed:!!(m[l]&&O.length),childCount:O.length,onCollapse:e&&O.length?()=>he(l):void 0},l)}),$e.createPortal(c.jsx(je,{dropAnimation:ot,children:d&&k?c.jsx(ee,{id:d,depth:k.depth,clone:!0,childCount:Ye(r,d,t)+1,value:u(k),indentationWidth:0}):null}),document.body)]})})}var pt=({value:e,onChange:t,renderValue:n,enableDrag:r=!0,isLoading:i=!1})=>i?c.jsx("div",{className:"txt-compact-small relative flex-1 overflow-y-auto",children:Array.from({length:10}).map((o,u)=>c.jsx(lt,{},u))}):c.jsx(it,{items:e,childrenProp:"category_children",collapsible:!0,enableDrag:r,onChange:t,renderValue:n}),lt=()=>c.jsx("div",{className:"bg-ui-bg-base -mb-px flex h-12 animate-pulse items-center border-y px-6 py-2.5"});export{pt as C};
