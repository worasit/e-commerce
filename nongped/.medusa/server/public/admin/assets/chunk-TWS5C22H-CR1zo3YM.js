import{c as Dt}from"./chunk-MWVM4TYO-bKUcYSnf.js";import{r as a,cF as Ot,cG as ce,aC as Nt,j as c,C as fe,m as X,V as _e,Y as At,b as ne,aP as et,b5 as ie,cH as Tt,B as ae,aF as Le,cI as B,cJ as Ft,cK as Pt,cL as Rt,cM as Gt,cN as Vt,cO as Wt,H as $t,cP as Kt,bd as Ue,cQ as Bt,I as Ht,X as Lt,x as Ut,T as Yt}from"./index-CJZ0utKv.js";import{f as Zt,C as Qt}from"./index.esm-Ls_FBjZZ.js";import{u as Xt,g as Jt,f as tt,c as qt}from"./index-B1m4_RH3.js";import{C as es}from"./checkbox-C144Yjdp.js";var ts=Object.defineProperty,ue=Object.getOwnPropertySymbols,st=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,Ye=(e,s,t)=>s in e?ts(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,ss=(e,s)=>{for(var t in s||(s={}))st.call(s,t)&&Ye(e,t,s[t]);if(ue)for(var t of ue(s))nt.call(s,t)&&Ye(e,t,s[t]);return e},ns=(e,s)=>{var t={};for(var n in e)st.call(e,n)&&s.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&ue)for(var n of ue(e))s.indexOf(n)<0&&nt.call(e,n)&&(t[n]=e[n]);return t};const rt=a.forwardRef((e,s)=>{var t=e,{color:n="currentColor"}=t,r=ns(t,["color"]);return a.createElement("svg",ss({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},r),a.createElement("g",{clipPath:"url(#a)"},a.createElement("path",{fill:n,d:"M8.5 2.528h-.778a.75.75 0 1 0 0 1.5h1.08a4 4 0 0 1-.302-1.5M10.695 6.07a4 4 0 0 1-1.21-.94.75.75 0 0 0-.29.592V6.75H1.5a.75.75 0 0 0 0 1.5h7.694v1.028a.75.75 0 0 0 1.5 0zM5.806 1.5a.75.75 0 1 0-1.5 0v1.028H1.5a.75.75 0 0 0 0 1.5h2.806v1.028a.75.75 0 0 0 1.5 0V1.5M12.611 6.75a.75.75 0 0 0 0 1.5h.889a.75.75 0 0 0 0-1.5zM6.972 11.722a.75.75 0 0 1 .75-.75H13.5a.75.75 0 1 1 0 1.5H7.722a.75.75 0 0 1-.75-.75M1.5 10.972a.75.75 0 0 0 0 1.5h2.806V13.5a.75.75 0 0 0 1.5 0V9.944a.75.75 0 1 0-1.5 0v1.028z"}),a.createElement("circle",{cx:12.5,cy:2.5,r:2.5,fill:"#60A5FA"}),a.createElement("circle",{cx:12.5,cy:2.5,r:2,stroke:n,strokeOpacity:.12})),a.createElement("defs",null,a.createElement("clipPath",{id:"a"},a.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});rt.displayName="AdjustmentsDone";var rs=Object.defineProperty,de=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,Ze=(e,s,t)=>s in e?rs(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,ls=(e,s)=>{for(var t in s||(s={}))lt.call(s,t)&&Ze(e,t,s[t]);if(de)for(var t of de(s))ot.call(s,t)&&Ze(e,t,s[t]);return e},os=(e,s)=>{var t={};for(var n in e)lt.call(e,n)&&s.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&de)for(var n of de(e))s.indexOf(n)<0&&ot.call(e,n)&&(t[n]=e[n]);return t};const it=a.forwardRef((e,s)=>{var t=e,{color:n="currentColor"}=t,r=os(t,["color"]);return a.createElement("svg",ls({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},r),a.createElement("g",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#a)"},a.createElement("path",{d:"M12.611 7.5h.889M1.5 7.5h8.444M7.722 3.278H13.5M1.5 3.278h3.556M7.722 11.722H13.5M1.5 11.722h3.556M9.944 5.722v3.556M5.056 1.5v3.556M5.056 9.944V13.5"})),a.createElement("defs",null,a.createElement("clipPath",{id:"a"},a.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});it.displayName="Adjustments";var is=Object.defineProperty,he=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable,Qe=(e,s,t)=>s in e?is(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,as=(e,s)=>{for(var t in s||(s={}))at.call(s,t)&&Qe(e,t,s[t]);if(he)for(var t of he(s))ct.call(s,t)&&Qe(e,t,s[t]);return e},cs=(e,s)=>{var t={};for(var n in e)at.call(e,n)&&s.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&he)for(var n of he(e))s.indexOf(n)<0&&ct.call(e,n)&&(t[n]=e[n]);return t};const ut=a.forwardRef((e,s)=>{var t=e,{color:n="currentColor"}=t,r=cs(t,["color"]);return a.createElement("svg",as({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},r),a.createElement("g",{clipPath:"url(#a)"},a.createElement("path",{fill:n,d:"M1 5.694H.25c0 .415.336.75.75.75zm13 0v.75a.75.75 0 0 0 .75-.75zm0-1.444h.75a.75.75 0 0 0-.445-.685zM7.5 1.361l.305-.685a.75.75 0 0 0-.61 0zM1 4.25l-.305-.685a.75.75 0 0 0-.445.685zm5.056 10.139a.75.75 0 0 0 0-1.5zM1 13.639l-.72-.21a.75.75 0 0 0 .72.96zm.632-2.167v-.75a.75.75 0 0 0-.72.54zm4.424.75a.75.75 0 0 0 0-1.5zm8.158-2.792a.75.75 0 1 0-1.06-1.061zM8.73 12.793a.75.75 0 1 0 1.06 1.06zM1 6.444h13v-1.5H1zm13.75-.75V4.25h-1.5v1.444zm-.445-2.13L7.805.677l-.61 1.37 6.5 2.89zM7.195.677l-6.5 2.889.61 1.37 6.5-2.889zM.25 4.25v1.444h1.5V4.25zm5.806 8.639H1v1.5h5.056zm-4.336.96.632-2.167-1.44-.42L.28 13.43zm-.088-1.627h4.424v-1.5H1.632zm.062-6.528v5.778h1.5V5.694zm4.39 5.778V5.694h-1.5v5.778zm7.07-3.103L8.73 12.793l1.06 1.06 4.424-4.423zm-3.876.756c0-.115.093-.208.208-.208v1.5c.713 0 1.292-.579 1.292-1.292zm.208-.208c.115 0 .208.093.208.208h-1.5c0 .713.579 1.292 1.292 1.292zm.208.208a.21.21 0 0 1-.208.208v-1.5c-.713 0-1.292.579-1.292 1.292zm-.208.208a.21.21 0 0 1-.208-.208h1.5c0-.713-.578-1.292-1.292-1.292zm3.764 3.764c0-.115.093-.208.208-.208v1.5c.714 0 1.292-.578 1.292-1.292zm.208-.208c.115 0 .209.093.209.208h-1.5c0 .714.578 1.292 1.291 1.292zm.209.208a.21.21 0 0 1-.209.209v-1.5c-.713 0-1.291.578-1.291 1.291zm-.209.209a.21.21 0 0 1-.208-.209h1.5c0-.713-.578-1.291-1.292-1.291z"})),a.createElement("defs",null,a.createElement("clipPath",{id:"a"},a.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});ut.displayName="BuildingTax";var us=function(e){var s=e.as,t=e.errors,n=e.name,r=e.message,l=e.render,i=function(p,x){if(p==null)return{};var v,g,f={},j=Object.keys(p);for(g=0;g<j.length;g++)x.indexOf(v=j[g])>=0||(f[v]=p[v]);return f}(e,["as","errors","name","message","render"]),o=Ot(),u=ce(t||o.formState.errors,n);if(!u)return null;var h=u.message,d=u.types,b=Object.assign({},i,{children:h||r});return a.isValidElement(s)?a.cloneElement(s,b):l?l({message:h||r,messages:d}):a.createElement(s||a.Fragment,b)};function te(e,s,t){let n=t.initialDeps??[],r;return()=>{var l,i,o,u;let h;t.key&&((l=t.debug)!=null&&l.call(t))&&(h=Date.now());const d=e();if(!(d.length!==n.length||d.some((x,v)=>n[v]!==x)))return r;n=d;let p;if(t.key&&((i=t.debug)!=null&&i.call(t))&&(p=Date.now()),r=s(...d),t.key&&((o=t.debug)!=null&&o.call(t))){const x=Math.round((Date.now()-h)*100)/100,v=Math.round((Date.now()-p)*100)/100,g=v/16,f=(j,C)=>{for(j=String(j);j.length<C;)j=" "+j;return j};console.info(`%c⏱ ${f(v,5)} /${f(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(u=t==null?void 0:t.onChange)==null||u.call(t,r),r}}function Ee(e,s){if(e===void 0)throw new Error("Unexpected undefined");return e}const ds=(e,s)=>Math.abs(e-s)<1,hs=(e,s,t)=>{let n;return function(...r){e.clearTimeout(n),n=e.setTimeout(()=>s.apply(this,r),t)}},fs=e=>e,ms=e=>{const s=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let r=s;r<=t;r++)n.push(r);return n},ps=(e,s)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;const r=i=>{const{width:o,height:u}=i;s({width:Math.round(o),height:Math.round(u)})};if(r(t.getBoundingClientRect()),!n.ResizeObserver)return()=>{};const l=new n.ResizeObserver(i=>{const o=i[0];if(o!=null&&o.borderBoxSize){const u=o.borderBoxSize[0];if(u){r({width:u.inlineSize,height:u.blockSize});return}}r(t.getBoundingClientRect())});return l.observe(t,{box:"border-box"}),()=>{l.unobserve(t)}},Xe={passive:!0},gs=typeof window>"u"?!0:"onscrollend"in window,vs=(e,s)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;let r=0;const l=e.options.useScrollendEvent&&gs?()=>{}:hs(n,()=>{s(r,!1)},e.options.isScrollingResetDelay),i=h=>()=>{const{horizontal:d,isRtl:b}=e.options;r=d?t.scrollLeft*(b&&-1||1):t.scrollTop,l(),s(r,h)},o=i(!0),u=i(!1);return u(),t.addEventListener("scroll",o,Xe),t.addEventListener("scrollend",u,Xe),()=>{t.removeEventListener("scroll",o),t.removeEventListener("scrollend",u)}},bs=(e,s,t)=>{if(s!=null&&s.borderBoxSize){const n=s.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},xs=(e,{adjustments:s=0,behavior:t},n)=>{var r,l;const i=e+s;(l=(r=n.scrollElement)==null?void 0:r.scrollTo)==null||l.call(r,{[n.options.horizontal?"left":"top"]:i,behavior:t})};class ws{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(r=>{r.forEach(l=>{this._measureElement(l.target,l)})}));return{disconnect:()=>{var r;(r=n())==null||r.disconnect(),t=null},observe:r=>{var l;return(l=n())==null?void 0:l.observe(r,{box:"border-box"})},unobserve:r=>{var l;return(l=n())==null?void 0:l.unobserve(r)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,r])=>{typeof r>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:fs,rangeExtractor:ms,onChange:()=>{},measureElement:bs,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!0,...t}},this.notify=t=>{var n,r;(r=(n=this.options).onChange)==null||r.call(n,this,t)},this.maybeNotify=te(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,l)=>{this.scrollAdjustments=0,this.scrollDirection=l?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=l,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,n)=>{const r=new Map,l=new Map;for(let i=n-1;i>=0;i--){const o=t[i];if(r.has(o.lane))continue;const u=l.get(o.lane);if(u==null||o.end>u.end?l.set(o.lane,o):o.end<u.end&&r.set(o.lane,!0),r.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((i,o)=>i.end===o.end?i.index-o.index:i.end-o.end)[0]:void 0},this.getMeasurementOptions=te(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,n,r,l,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:r,getItemKey:l,enabled:i}),{key:!1}),this.getMeasurements=te(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:r,getItemKey:l,enabled:i},o)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const u=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const h=this.measurementsCache.slice(0,u);for(let d=u;d<t;d++){const b=l(d),p=this.options.lanes===1?h[d-1]:this.getFurthestMeasurement(h,d),x=p?p.end+this.options.gap:n+r,v=o.get(b),g=typeof v=="number"?v:this.options.estimateSize(d),f=x+g,j=p?p.lane:d%this.options.lanes;h[d]={index:d,start:x,size:g,end:f,key:b,lane:j}}return this.measurementsCache=h,h},{key:"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=te(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(t,n,r)=>this.range=t.length>0&&n>0?Cs({measurements:t,outerSize:n,scrollOffset:r}):null,{key:"calculateRange",debug:()=>this.options.debug}),this.getIndexes=te(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,n,r,l)=>n===null?[]:t({startIndex:n.startIndex,endIndex:n.endIndex,overscan:r,count:l}),{key:"getIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,r=t.getAttribute(n);return r?parseInt(r,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const r=this.indexFromElement(t),l=this.measurementsCache[r];if(!l)return;const i=l.key,o=this.elementsCache.get(i);o!==t&&(o&&this.observer.unobserve(o),this.observer.observe(t),this.elementsCache.set(i,t)),t.isConnected&&this.resizeItem(r,this.options.measureElement(t,n,this))},this.resizeItem=(t,n)=>{const r=this.measurementsCache[t];if(!r)return;const l=this.itemSizeCache.get(r.key)??r.size,i=n-l;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,i,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&(this.options.debug&&console.info("correction",i),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,n)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((n,r)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(r))});return}this._measureElement(t,void 0)},this.getVirtualItems=te(()=>[this.getIndexes(),this.getMeasurements()],(t,n)=>{const r=[];for(let l=0,i=t.length;l<i;l++){const o=t[l],u=n[o];r.push(u)}return r},{key:"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();if(n.length!==0)return Ee(n[dt(0,n.length-1,r=>Ee(n[r]).start,t)])},this.getOffsetForAlignment=(t,n)=>{const r=this.getSize(),l=this.getScrollOffset();n==="auto"&&(t<=l?n="start":t>=l+r?n="end":n="start"),n==="start"?t=t:n==="end"?t=t-r:n==="center"&&(t=t-r/2);const i=this.options.horizontal?"scrollWidth":"scrollHeight",u=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[i]:this.scrollElement[i]:0)-r;return Math.max(Math.min(u,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const r=this.measurementsCache[t];if(!r)return;const l=this.getSize(),i=this.getScrollOffset();if(n==="auto")if(r.end>=i+l-this.options.scrollPaddingEnd)n="end";else if(r.start<=i+this.options.scrollPaddingStart)n="start";else return[i,n];const o=n==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,n),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:n="start",behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:r})},this.scrollToIndex=(t,{align:n="auto",behavior:r}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const l=this.getOffsetForIndex(t,n);if(!l)return;const[i,o]=l;this._scrollToOffset(i,{adjustments:void 0,behavior:r}),r!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[h]=Ee(this.getOffsetForIndex(t,o));ds(h,this.getScrollOffset())||this.scrollToIndex(t,{align:o,behavior:r})}else this.scrollToIndex(t,{align:o,behavior:r})}))},this.scrollBy=(t,{behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let r;return n.length===0?r=this.options.paddingStart:r=this.options.lanes===1?((t=n[n.length-1])==null?void 0:t.end)??0:Math.max(...n.slice(-this.options.lanes).map(l=>l.end)),Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:n,behavior:r})=>{this.options.scrollToFn(t,{behavior:r,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s)}}const dt=(e,s,t,n)=>{for(;e<=s;){const r=(e+s)/2|0,l=t(r);if(l<n)e=r+1;else if(l>n)s=r-1;else return r}return e>0?e-1:0};function Cs({measurements:e,outerSize:s,scrollOffset:t}){const n=e.length-1,l=dt(0,n,o=>e[o].start,t);let i=l;for(;i<n&&e[i].end<t+s;)i++;return{startIndex:l,endIndex:i}}const ys=typeof document<"u"?a.useLayoutEffect:a.useEffect;function js(e){const s=a.useReducer(()=>({}),{})[1],t={...e,onChange:(r,l)=>{var i;l?Nt.flushSync(s):s(),(i=e.onChange)==null||i.call(e,r,l)}},[n]=a.useState(()=>new ws(t));return n.setOptions(t),a.useEffect(()=>n._didMount(),[]),ys(()=>n._willUpdate()),n}function Je(e){return js({observeElementRect:ps,observeElementOffset:vs,scrollToFn:xs,...e})}function Es(e,s){typeof e=="function"?e(s):e&&"current"in e&&(e.current=s)}var me=(...e)=>s=>{e.forEach(t=>Es(t,s))},ht=a.createContext(null),ft=()=>{const e=a.useContext(ht);if(!e)throw new Error("useDataGridContext must be used within a DataGridContextProvider");return e};function mt(e){return`${e.row}:${e.col}`}function pt(e,s){return s?e.row===s.row&&e.col===s.col:!1}var Ms=[".",","];function gt(e){return Ms.includes(e.key)&&e.ctrlKey&&e.altKey}var ks=/^.$/u,Ss=/^[0-9]$/u,pe=({context:e})=>{const{register:s,control:t,anchor:n,setIsEditing:r,setSingleRange:l,setIsSelecting:i,setRangeEnd:o,getWrapperFocusHandler:u,getWrapperMouseOverHandler:h,getInputChangeHandler:d,getIsCellSelected:b,getIsCellDragSelected:p,getCellMetadata:x}=ft(),{rowIndex:v,columnIndex:g}=e,f=a.useMemo(()=>({row:v,col:g}),[v,g]),{id:j,field:C,type:E,innerAttributes:y,inputAttributes:_}=a.useMemo(()=>x(f),[f,x]),[T,P]=a.useState(!0),F=a.useRef(null),N=a.useRef(null),Q=a.useCallback(M=>{if(M.preventDefault(),M.stopPropagation(),M.detail===2&&N.current){P(!1),N.current.focus();return}if(M.shiftKey&&f.col===(n==null?void 0:n.col)){o(f);return}F.current&&(l(f),i(!0),F.current.focus())},[f,n,o,l,i]),J=a.useCallback(M=>{var m;if(M.preventDefault(),M.stopPropagation(),M.detail===2){(m=N.current)==null||m.focus();return}if(M.shiftKey){o(f);return}F.current&&(l(f),i(!0),F.current.focus())},[i,l,o,f]),U=a.useCallback(()=>{P(!0),r(!1)},[r]),Y=a.useCallback(()=>{P(!1),r(!0)},[r]),G=a.useCallback(M=>E==="number"?Ss.test(M):E==="text"?ks.test(M):!1,[E]),q=a.useCallback(M=>{var m;if(!(!N.current||!G(M.key)||!T)&&!(M.key.toLowerCase()==="z"&&(M.ctrlKey||M.metaKey))&&!(M.key.toLowerCase()==="c"&&(M.ctrlKey||M.metaKey))&&!(M.key.toLowerCase()==="v"&&(M.ctrlKey||M.metaKey))&&M.key!=="Enter"&&!gt(M.nativeEvent)){if(N.current.focus(),P(!1),N.current instanceof HTMLInputElement){N.current.value="";const w=(m=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"))==null?void 0:m.set;w==null||w.call(N.current,M.key);const I=new Event("input",{bubbles:!0});N.current.dispatchEvent(I)}M.stopPropagation(),M.preventDefault()}},[T,G]),R=a.useMemo(()=>n?pt(f,n):!1,[n,f]),H=a.useMemo(()=>E==="boolean",[E]);a.useEffect(()=>{var M,m;R&&!((M=F.current)!=null&&M.contains(document.activeElement))&&((m=F.current)==null||m.focus())},[R]);const ee={container:{field:C,isAnchor:R,isSelected:b(f),isDragSelected:p(f),showOverlay:H?!1:T,innerProps:{ref:F,onMouseOver:h(f),onMouseDown:E==="boolean"?J:void 0,onKeyDown:q,onFocus:u(f),...y},overlayProps:{onMouseDown:Q}},input:{ref:N,onBlur:U,onFocus:Y,onChange:d(C),..._}};return{id:j,field:C,register:s,control:t,renderProps:ee}},re=({context:e})=>{const{errors:s,getCellErrorMetadata:t,navigateToField:n}=ft(),{rowIndex:r,columnIndex:l}=e,{accessor:i,field:o}=a.useMemo(()=>t({row:r,col:l}),[r,l,t]),u=i&&l===0?ce(s,i):void 0,h=[];function d(p,x){if(p)if(_s(p)){const v=p.message,g=()=>n(x);v&&h.push({message:v,to:g})}else Object.keys(p).forEach(v=>{const g=p[v],f=`${x}.${v}`;g&&typeof g=="object"&&d(g,f)})}u&&i&&d(u,i);const b=o?ce(s,o):void 0;return{errors:s,rowErrors:h,cellError:b}};function _s(e){return typeof e=="object"&&"message"in e&&"type"in e}var se=class{constructor({fields:e,prev:s,next:t,setter:n}){B(this,"_fields"),B(this,"_prev"),B(this,"_next"),B(this,"_setter"),this._fields=e,this._prev=s,this._next=t,this._setter=n}execute(){this._setter(this._fields,this._next)}undo(){this._setter(this._fields,this._prev)}redo(){this.execute()}},Is=class{constructor(e,s){B(this,"cells"),B(this,"rowAccessors",[]),B(this,"columnAccessors",[]),this.cells=this._populateCells(e,s),this.rowAccessors=this._computeRowAccessors(),this.columnAccessors=this._computeColumnAccessors()}_computeRowAccessors(){return this.cells.map((e,s)=>this.getRowAccessor(s))}_computeColumnAccessors(){return this.cells.length===0?[]:this.cells[0].map((e,s)=>this.getColumnAccessor(s))}getFirstNavigableCell(){for(let e=0;e<this.cells.length;e++)for(let s=0;s<this.cells[0].length;s++)if(this.cells[e][s]!==null)return{row:e,col:s};return null}getFieldsInRow(e){const s=[];return e<0||e>=this.cells.length||this.cells[e].forEach(t=>{t!==null&&s.push(t.field)}),s}getFieldsInSelection(e,s){var i;const t=[];if(!e||!s)return t;if(e.col!==s.col)throw new Error("Selection must be in the same column");const n=Math.min(e.row,s.row),r=Math.max(e.row,s.row),l=e.col;for(let o=n;o<=r;o++)this._isValidPosition(o,l)&&this.cells[o][l]!==null&&t.push((i=this.cells[o][l])==null?void 0:i.field);return t}getCellField(e){var s;return this._isValidPosition(e.row,e.col)&&((s=this.cells[e.row][e.col])==null?void 0:s.field)||null}getCellType(e){var s;return this._isValidPosition(e.row,e.col)&&((s=this.cells[e.row][e.col])==null?void 0:s.type)||null}getIsCellSelected(e,s,t){if(!e||!s||!t)return!1;if(s.col!==t.col)throw new Error("Selection must be in the same column");const n=Math.min(s.row,t.row),r=Math.max(s.row,t.row),l=s.col;return e.col===l&&e.row>=n&&e.row<=r}toggleColumn(e,s){e<0||e>=this.cells[0].length||this.cells.forEach((t,n)=>{const r=t[e];r&&(this.cells[n][e]={...r,enabled:s})})}toggleRow(e,s){e<0||e>=this.cells.length||this.cells[e].forEach((t,n)=>{t&&(this.cells[e][n]={...t,enabled:s})})}getCoordinatesByField(e){if(this.rowAccessors.length===1){const s=this.columnAccessors.indexOf(e);return s===-1?null:{row:0,col:s}}for(let s=0;s<this.rowAccessors.length;s++){const t=this.rowAccessors[s];if(t!==null&&e.startsWith(t))for(let n=0;n<this.columnAccessors.length;n++){const r=this.columnAccessors[n];if(r===null)continue;if(`${t}.${r}`===e)return{row:s,col:n}}}return null}getRowAccessor(e){if(e<0||e>=this.cells.length)return null;const t=this.cells[e].filter(l=>l!==null).map(l=>l.field.split("."));if(t.length===0)return null;let n=t[0];for(const l of t)if(n=n.filter((i,o)=>l[o]===i),n.length===0)break;const r=n.join(".");return r||null}getColumnAccessor(e){if(e<0||e>=this.cells[0].length)return null;const s=this.cells.map((r,l)=>{const i=r[e];if(!i)return null;const o=this.getRowAccessor(l);return o&&i.field.startsWith(o+".")?i.field.slice(o.length+1):null}).filter(r=>r!==null);if(s.length===0)return null;const t=s[0];return s.every(r=>r===t)?t:null}getValidMovement(e,s,t,n=!1){var i;const[r,l]=this._getDirectionDeltas(t);if(n)return this._getLastValidCellInDirection(e,s,r,l);{let o=e+r,u=s+l;for(;this._isValidPosition(o,u);){if(this.cells[o][u]!==null&&((i=this.cells[o][u])==null?void 0:i.enabled)!==!1)return{row:o,col:u};o+=r,u+=l}return{row:e,col:s}}}_isValidPosition(e,s,t){return t||(t=this.cells),e>=0&&e<t.length&&s>=0&&s<t[0].length}_getDirectionDeltas(e){switch(e){case"ArrowUp":return[-1,0];case"ArrowDown":return[1,0];case"ArrowLeft":return[0,-1];case"ArrowRight":return[0,1];default:return[0,0]}}_getLastValidCellInDirection(e,s,t,n){let r=e,l=s,i=e,o=s;for(;this._isValidPosition(r+t,l+n);)r+=t,l+=n,this.cells[r][l]!==null&&(i=r,o=l);return{row:i,col:o}}_populateCells(e,s){const t=Array.from({length:e.length},()=>Array(s.length).fill(null));return e.forEach((n,r)=>{s.forEach((l,i)=>{if(!this._isValidPosition(r,i,t))return;const{name:o,field:u,type:h,...d}=l.meta,b={row:n,column:{...l,meta:d}},p=u?u(b):null;!p||!h||(t[r][i]={field:p,type:h,enabled:!0})})}),t}},zs=class{constructor(e){B(this,"container"),this.container=e}getInput(e){var n;const s=this._getCellId(e),t=(n=this.container)==null?void 0:n.querySelector(`[data-cell-id="${s}"]`);return t||null}getInputByField(e){var t;const s=(t=this.container)==null?void 0:t.querySelector(`[data-field="${e}"]`);return s||null}getCoordinatesByField(e){var l;const s=(l=this.container)==null?void 0:l.querySelector(`[data-field="${e}"][data-cell-id]`);if(!s)return null;const t=s.getAttribute("data-cell-id");if(!t)return null;const[n,r]=t.split(":").map(i=>parseInt(i,10));return isNaN(n)||isNaN(r)?null:{row:n,col:r}}getContainer(e){var n;const s=this._getCellId(e),t=(n=this.container)==null?void 0:n.querySelector(`[data-container-id="${s}"]`);return t||null}_getCellId(e){return mt(e)}},Me=class{constructor({prev:e,next:s,setter:t}){B(this,"_prev"),B(this,"_next"),B(this,"_setter"),this._prev=e,this._next=s,this._setter=t}execute(){this._setter(this._next)}undo(){this._setter(this._prev)}redo(){this.execute()}},Ds=({matrix:e,anchor:s,rangeEnd:t,setRangeEnd:n,isDragging:r,setIsDragging:l,isSelecting:i,setIsSelecting:o,setSingleRange:u,dragEnd:h,setDragEnd:d,setValue:b,execute:p})=>{const x=a.useCallback(y=>_=>{u(y)},[u]),v=a.useCallback(y=>_=>{if(_.stopPropagation(),_.preventDefault(),_.shiftKey){n(y);return}o(!0),u(y)},[o,n,u]),g=a.useCallback(y=>{if(!(!r&&!i))return _=>{(s==null?void 0:s.col)===y.col&&(i?n(y):d(y))}},[s==null?void 0:s.col,r,i,d,n]),f=a.useCallback(y=>(_,T)=>{const P=new Me({next:_,prev:T,setter:F=>{b(y,F,{shouldDirty:!0,shouldTouch:!0})}});p(P)},[b,p]),j=a.useCallback(y=>{l(!0)},[l]),C=a.useCallback(y=>!y||!s||!t?!1:e.getIsCellSelected(y,s,t),[s,t,e]),E=a.useCallback(y=>!y||!s||!h?!1:e.getIsCellSelected(y,s,h),[s,h,e]);return{getWrapperFocusHandler:x,getOverlayMouseDownHandler:v,getWrapperMouseOverHandler:g,getInputChangeHandler:f,getIsCellSelected:C,getIsCellDragSelected:E,onDragToFillStart:j}},Os=({matrix:e})=>{const s=a.useCallback(n=>{const{row:r,col:l}=n,i=mt(n),o=e.getCellField(n),u=e.getCellType(n);if(!o||!u)throw new Error(`'field' or 'type' is null for cell ${i}`);return{id:i,field:o,type:u,inputAttributes:{"data-row":r,"data-col":l,"data-cell-id":i,"data-field":o},innerAttributes:{"data-container-id":i}}},[e]),t=a.useCallback(n=>{const r=e.getRowAccessor(n.row),l=e.getCellField(n);return{accessor:r,field:l}},[e]);return{getCellMetadata:s,getCellErrorMetadata:t}},Ns=({matrix:e,form:s})=>{const[t,n]=a.useState(null),{getValues:r,setValue:l}=s,i=a.useCallback(u=>{if(!u)return null;const h=e.getCellField(u);if(!h)return null;const d=r(h);n({field:h,value:d})},[r,e]),o=a.useCallback(()=>{if(!t)return;const{field:u,value:h}=t;requestAnimationFrame(()=>{l(u,h)})},[l,t]);return{createSnapshot:i,restoreSnapshot:o}},As=({matrix:e,anchor:s,rangeEnd:t,isEditing:n,getSelectionValues:r,setSelectionValues:l,execute:i})=>{const o=a.useCallback(h=>{var x;if(n||!s||!t)return;h.preventDefault();const d=e.getFieldsInSelection(s,t),p=r(d).map(v=>`${v}`??"").join("	");(x=h.clipboardData)==null||x.setData("text/plain",p)},[n,s,t,e,r]),u=a.useCallback(h=>{var g;if(n||!s||!t)return;h.preventDefault();const d=(g=h.clipboardData)==null?void 0:g.getData("text/plain");if(!d)return;const b=d.split("	"),p=e.getFieldsInSelection(s,t),x=r(p),v=new se({fields:p,next:b,prev:x,setter:l});i(v)},[n,s,t,e,r,l,i]);return{handleCopyEvent:o,handlePasteEvent:u}};function Ts(e,s){const t=e.getAllLeafColumns(),n=t.map(u=>({id:u.id,name:Fs(u),checked:u.getIsVisible(),disabled:!u.getCanHide()})),r=a.useCallback(u=>h=>{const d=t[u];d.getCanHide()&&(s.toggleColumn(u,h),d.toggleVisibility(h))},[t,s]),l=a.useCallback(()=>{e.setColumnVisibility({})},[e]),o=n.filter(u=>!u.disabled).length===0;return{columnOptions:n,handleToggleColumn:r,handleResetColumns:l,isDisabled:o}}function Fs(e){const s=e.columnDef.id,t=e.columnDef.enableHiding,n=e==null?void 0:e.columnDef.meta;if(!s)throw new Error("Column is missing an id, which is a required field. Please provide an id for the column.");return!(n!=null&&n.name)&&t&&console.warn(`Column "${s}" does not have a name. You should add a name to the column definition. Falling back to the column id.`),(n==null?void 0:n.name)||s}var Ps=(e,s,t)=>{const[n,r]=a.useState(!1),[l,i]=a.useState(null),{flatRows:o}=s.getRowModel(),u=s.getAllFlatColumns(),h=vt(t),d=h.length,{rowsWithErrors:b,columnsWithErrors:p}=a.useMemo(()=>{const v=new Set,g=new Set;return h.forEach(f=>{const j=e.rowAccessors.findIndex(E=>E&&(f===E||f.startsWith(`${E}.`)));j!==-1&&v.add(j);const C=e.columnAccessors.findIndex(E=>E&&(f===E||f.endsWith(`.${E}`)));C!==-1&&g.add(C)}),{rowsWithErrors:v,columnsWithErrors:g}},[h,e.rowAccessors,e.columnAccessors]),x=a.useCallback((v,g,f,j)=>{if(n)l&&(f(l.rows),j(l.columns));else{i({rows:{...v},columns:{...g}});const C=o.map((y,_)=>b.has(_)?void 0:_).filter(y=>y!==void 0),E=u.map((y,_)=>!p.has(_)&&_!==0?y.id:void 0).filter(y=>y!==void 0);f(C.reduce((y,_)=>({...y,[_]:!1}),{})),j(E.reduce((y,_)=>({...y,[_]:!1}),{}))}r(C=>!C)},[n,l,o,u,b,p]);return{errorCount:d,isHighlighted:n,toggleErrorHighlighting:x}};function vt(e,s=[]){return typeof e!="object"||e===null?[]:"message"in e&&"type"in e?[s.join(".")]:Object.entries(e).flatMap(([t,n])=>vt(n,[...s,t]))}var Rs=({matrix:e,form:s,anchor:t})=>{const{getValues:n,setValue:r}=s,l=a.useCallback(o=>o.length?o.map(u=>n(u)):[],[n]),i=a.useCallback(async(o,u)=>{if(!o.length||!t)return;const h=e.getCellType(t);if(!h)return;const d=$s(u,h);o.forEach((b,p)=>{if(!b)return;const x=p%u.length,v=d[x];r(b,v,{shouldDirty:!0,shouldTouch:!0})})},[e,t,r]);return{getSelectionValues:l,setSelectionValues:i}};function Gs(e){if(typeof e=="number")return e;const s=Number(e);if(isNaN(s))throw new Error(`String "${e}" cannot be converted to number.`);return s}function Vs(e){if(typeof e=="boolean")return e;if(typeof e>"u"||e===null)return!1;const s=e.toLowerCase();if(s==="true"||s==="false")return s==="true";throw new Error(`String "${e}" cannot be converted to boolean.`)}function Ws(e){return typeof e>"u"||e===null?"":String(e)}function $s(e,s){switch(s){case"number":return e.map(t=>t===""?t:Gs(t));case"boolean":return e.map(Vs);case"text":return e.map(Ws);default:throw new Error(`Unsupported target type "${s}".`)}}var Ks=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Bs=["ArrowUp","ArrowDown"],Hs=({containerRef:e,matrix:s,anchor:t,rangeEnd:n,isEditing:r,setTrapActive:l,scrollToCoordinates:i,setSingleRange:o,setRangeEnd:u,onEditingChangeHandler:h,getValues:d,setValue:b,execute:p,undo:x,redo:v,queryTool:g,getSelectionValues:f,setSelectionValues:j,restoreSnapshot:C})=>{const E=a.useCallback(m=>{if(!t)return;const w=s.getCellType(t);if(r&&w!=="boolean")return;const I=Bs.includes(m.key)?"vertical":"horizontal",S=I==="horizontal"?t:m.shiftKey?n:t,z=I==="horizontal"?o:m.shiftKey?u:o;if(!S)return;const{row:D,col:V}=S,A=K=>{m.preventDefault(),m.stopPropagation(),i(K,I),z(K)},Z=s.getValidMovement(D,V,m.key,m.metaKey||m.ctrlKey);A(Z)},[r,t,n,i,o,u,s]),y=a.useCallback(m=>{if(!t)return;m.preventDefault(),m.stopPropagation();const{row:w,col:I}=t,S=m.shiftKey?"ArrowLeft":"ArrowRight",z="horizontal",D=s.getValidMovement(w,I,S,m.metaKey||m.ctrlKey);i(D,z),o(D)},[t,i,o,s]),_=a.useCallback(m=>{if(m.preventDefault(),m.shiftKey){v();return}x()},[v,x]),T=a.useCallback(m=>{const w=n??m,I=s.getFieldsInSelection(m,w),S=f(I),z=S.every(A=>A===!0),D=Array.from({length:S.length},()=>!z),V=new se({fields:I,next:D,prev:S,setter:j});p(V)},[n,s,f,j,p]),P=a.useCallback(m=>{const w=s.getCellField(m),I=g==null?void 0:g.getInput(m);if(!w||!I)return;const S=d(w),z="",D=new Me({next:z,prev:S,setter:V=>{b(w,V,{shouldDirty:!0,shouldTouch:!0})}});p(D),I.focus()},[s,g,d,p,b]),F=a.useCallback(m=>{if(!t||r)return;m.preventDefault();const w=s.getCellType(t);if(w)switch(w){case"boolean":T(t);break;case"number":case"text":P(t);break}},[t,r,s,T,P]),N=a.useCallback((m,w)=>{const I=m.shiftKey?"ArrowUp":"ArrowDown",S=s.getValidMovement(w.row,w.col,I,!1);if(w.row!==S.row||w.col!==S.col)o(S),i(S,"vertical");else{const z=g==null?void 0:g.getContainer(w);z==null||z.focus()}h(!1)},[g,s,i,o,h]),Q=a.useCallback(m=>{const w=g==null?void 0:g.getInput(m);w&&(w.focus(),h(!0))},[g,h]),J=a.useCallback((m,w)=>{if(r){N(m,w);return}Q(w)},[N,Q,r]),U=a.useCallback((m,w)=>{const I=s.getCellField(w);if(!I)return;const S=d(I);let z;typeof S=="boolean"?z=!S:z=!0;const D=new Me({next:z,prev:S,setter:V=>{b(I,V,{shouldDirty:!0,shouldTouch:!0})}});p(D),N(m,w)},[p,d,N,s,b]),Y=a.useCallback(m=>{if(!t)return;switch(m.preventDefault(),s.getCellType(t)){case"text":case"number":J(m,t);break;case"boolean":{U(m,t);break}}},[t,s,J,U]),G=a.useCallback((m,w)=>{const I=s.getFieldsInSelection(m,w),S=f(I),z=Array.from({length:S.length},()=>""),D=new se({fields:I,next:z,prev:S,setter:j});p(D)},[s,f,j,p]),q=a.useCallback((m,w)=>{const I=s.getFieldsInSelection(m,w),S=f(I),z=Array.from({length:S.length},()=>!1),D=new se({fields:I,next:z,prev:S,setter:j});p(D)},[p,f,s,j]),R=a.useCallback(m=>{if(!t||!n||r)return;m.preventDefault();const w=s.getCellType(t);if(w)switch(w){case"text":case"number":G(t,n);break;case"boolean":q(t,n);break}},[t,n,r,s,G,q]),H=a.useCallback(m=>{if(!t||!r)return;m.preventDefault(),m.stopPropagation(),C();const w=g==null?void 0:g.getContainer(t);w==null||w.focus()},[g,r,t,C]),ee=a.useCallback(m=>{if(!e||r)return;const w=Ls(e),I=S=>{S&&(l(!1),S.focus())};switch(m.key){case".":I(w.cancel);break;case",":I(w.shortcuts);break}},[t,r,l,e]);return{handleKeyDownEvent:a.useCallback(m=>{if(Ks.includes(m.key)){E(m);return}if(m.key==="z"&&(m.metaKey||m.ctrlKey)){_(m);return}if(m.key===" "){F(m);return}if(m.key==="Delete"||m.key==="Backspace"){R(m);return}if(m.key==="Enter"){Y(m);return}if(m.key==="Escape"){H(m);return}if(m.key==="Tab"){y(m);return}},[H,E,_,F,Y,R,y]),handleSpecialFocusKeys:ee}};function Ls(e){const s=Array.from(document.querySelectorAll("[tabindex], a, button, input, select, textarea")),t=s.indexOf(e.current),n=t>0?s[t-1]:null;let r=null;for(let l=t+1;l<s.length;l++)if(!e.current.contains(s[l])){r=s[l];break}return{shortcuts:n,cancel:r}}var Us=({matrix:e,anchor:s,dragEnd:t,setDragEnd:n,isDragging:r,setIsDragging:l,setRangeEnd:i,setIsSelecting:o,getSelectionValues:u,setSelectionValues:h,execute:d})=>{const b=a.useCallback(()=>{if(!r||!s||!t)return;const x=e.getFieldsInSelection(s,t),v=e.getCellField(s);if(!v||!x.length)return;const g=u([v]),f=x.filter(y=>y!==v),j=u(f),C=Array.from({length:j.length},()=>g[0]),E=new se({fields:f,prev:j,next:C,setter:h});d(E),l(!1),n(null),i(t)},[r,s,t,e,u,h,d,l,n,i]);return{handleMouseUpEvent:a.useCallback(()=>{b(),o(!1)},[b,o])}},Ys=({matrix:e,anchor:s,visibleColumns:t,visibleRows:n,columnVirtualizer:r,rowVirtualizer:l,setColumnVisibility:i,flatColumns:o,queryTool:u,setSingleRange:h})=>{const d=a.useCallback((p,x)=>{if(!s)return;const{row:v,col:g}=p,{row:f,col:j}=s,C=v>=f?"down":"up",E=g>=j?"right":"left";let y=C==="down"?v+1:v-1;n[y]===void 0&&(y=v);let _=E==="right"?g+1:g-1;t[_]===void 0&&(_=g);const T={align:"auto",behavior:"auto"};(x==="horizontal"||x==="both")&&r.scrollToIndex(_,T),(x==="vertical"||x==="both")&&l.scrollToIndex(y,T)},[s,r,n,l,t]),b=a.useCallback(p=>{const x=e.getCoordinatesByField(p);if(!x)return;const v=o[x.col];i(g=>({...g,[v.id]:!0})),requestAnimationFrame(()=>{d(x,"both"),h(x)}),requestAnimationFrame(()=>{const g=u==null?void 0:u.getInput(x);g&&g.focus()})},[e,o,i,d,h,u]);return{scrollToCoordinates:d,navigateToField:b}},Zs=e=>{const s=a.useRef(null);return a.useEffect(()=>{e.current&&(s.current=new zs(e.current))},[e]),s.current},bt=({rowErrors:e})=>{const s=e?e.length:0;return!e||s<=0?null:c.jsx(_e,{content:c.jsx("ul",{className:"flex flex-col gap-y-3",children:e.map((t,n)=>c.jsx(Qs,{error:t},n))}),delayDuration:0,children:c.jsx(At,{color:"red",size:"2xsmall",className:"cursor-default",children:s})})},Qs=({error:e})=>{const{t:s}=ne();return c.jsxs("li",{className:"txt-compact-small flex flex-col items-start",children:[e.message,c.jsx("button",{type:"button",onClick:e.to,className:"text-ui-fg-interactive hover:text-ui-fg-interactive-hover transition-fg",children:s("dataGrid.errors.fixError")})]})},ge=({isAnchor:e,isSelected:s,isDragSelected:t,field:n,showOverlay:r,placeholder:l,innerProps:i,overlayProps:o,children:u,errors:h,rowErrors:d})=>{const p=!!ce(h,n);return c.jsxs("div",{className:X("bg-ui-bg-base group/cell relative flex size-full items-center gap-x-2 px-4 py-2.5 outline-none",{"bg-ui-tag-red-bg text-ui-tag-red-text":p&&!e&&!s&&!t,"ring-ui-bg-interactive ring-2 ring-inset":e,"bg-ui-bg-highlight [&:has([data-field]:focus)]:bg-ui-bg-base":s||e,"bg-ui-bg-subtle":t&&!e}),tabIndex:-1,...i,children:[c.jsx(us,{name:n,errors:h,render:({message:x})=>c.jsx("div",{className:"flex items-center justify-center",children:c.jsx(_e,{content:x,delayDuration:0,children:c.jsx(et,{className:"text-ui-tag-red-icon z-[3]"})})})}),c.jsx("div",{className:"relative z-[1] flex size-full items-center justify-center",children:c.jsx(Xs,{isAnchor:e,placeholder:l,children:u})}),c.jsx(bt,{rowErrors:d}),r&&c.jsx("div",{...o,"data-cell-overlay":"true",className:"absolute inset-0 z-[2] size-full"})]})},Xs=({isAnchor:e,placeholder:s,children:t})=>!e&&s?s:t,Js=({context:e,disabled:s})=>{const{field:t,control:n,renderProps:r}=pe({context:e}),l=re({context:e}),{container:i,input:o}=r;return c.jsx(fe,{control:n,name:t,render:({field:u})=>c.jsx(ge,{...i,...l,children:c.jsx(qs,{field:u,inputProps:o,disabled:s})})})},qs=({field:e,inputProps:s,disabled:t})=>{const{ref:n,value:r,onBlur:l,name:i,disabled:o}=e,{ref:u,onBlur:h,onChange:d,onFocus:b,...p}=s,x=me(n,u);return c.jsx(es,{disabled:t||o,name:i,checked:r,onCheckedChange:v=>d(v===!0,r),onFocus:b,onBlur:()=>{l(),h()},ref:x,tabIndex:-1,...p})},ke=({context:e,code:s})=>{const{field:t,control:n,renderProps:r}=pe({context:e}),l=re({context:e}),{container:i,input:o}=r,u=Dt[s.toUpperCase()];return c.jsx(fe,{control:n,name:t,render:({field:h})=>c.jsx(ge,{...i,...l,children:c.jsx(en,{field:h,inputProps:o,currencyInfo:u})})})},en=({field:e,inputProps:s,currencyInfo:t})=>{const{value:n,onChange:r,onBlur:l,ref:i,...o}=e,{ref:u,onBlur:h,onFocus:d,onChange:b,...p}=s,x=a.useCallback(C=>{const E=typeof C=="number"?C.toString():C||"";return Zt({value:E,decimalScale:t.decimal_digits,disableGroupSeparators:!0,decimalSeparator:"."})},[t]),[v,g]=a.useState(n||""),f=(C,E,y)=>{if(!C){g("");return}g(C)};a.useEffect(()=>{let C=n;isNaN(Number(n))||(C=x(C)),g(C)},[n,x]);const j=me(u,i);return c.jsxs("div",{className:"relative flex size-full items-center",children:[c.jsx("span",{className:"txt-compact-small text-ui-fg-muted pointer-events-none absolute left-0 w-fit min-w-4","aria-hidden":!0,children:t.symbol_native}),c.jsx(Qt,{...o,...p,ref:j,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent pl-8 text-right outline-none",value:v||void 0,onValueChange:f,formatValueOnBlur:!0,onBlur:()=>{l(),h(),b(v,n)},onFocus:d,decimalScale:t.decimal_digits,decimalsLimit:t.decimal_digits,autoComplete:"off",tabIndex:-1})]})},tn=({context:e,...s})=>{const{field:t,control:n,renderProps:r}=pe({context:e}),l=re({context:e}),{container:i,input:o}=r;return c.jsx(fe,{control:n,name:t,render:({field:u})=>c.jsx(ge,{...i,...l,children:c.jsx(sn,{field:u,inputProps:o,...s})})})},sn=({field:e,inputProps:s,...t})=>{const{ref:n,value:r,onChange:l,onBlur:i,...o}=e,{ref:u,onChange:h,onBlur:d,onFocus:b,...p}=s,[x,v]=a.useState(r);a.useEffect(()=>{v(r)},[r]);const g=me(u,n);return c.jsx("div",{className:"size-full",children:c.jsx("input",{ref:g,value:x,onChange:f=>v(f.target.value),onBlur:()=>{i(),d(),h(x,r)},onFocus:b,type:"number",inputMode:"decimal",className:X("txt-compact-small size-full bg-transparent outline-none","placeholder:text-ui-fg-muted"),tabIndex:-1,...t,...o,...p})})},Se=({context:e,children:s})=>{const{rowErrors:t}=re({context:e});return c.jsxs("div",{className:"bg-ui-bg-subtle txt-compact-small text-ui-fg-subtle flex size-full cursor-not-allowed items-center justify-between overflow-hidden px-4 py-2.5 outline-none",children:[c.jsx("span",{className:"truncate",children:s}),c.jsx(bt,{rowErrors:t})]})},nn=(e=20)=>{const[s,t]=a.useState([]),[n,r]=a.useState([]),l=s.length>0,i=n.length>0,o=a.useCallback(()=>{if(!l)return;const d=s[s.length-1],b=s.slice(0,s.length-1);d.undo(),t(b),r([d,...n.slice(0,e-1)])},[l,n,s,e]),u=a.useCallback(()=>{if(!i)return;const d=n[0],b=n.slice(1);d.redo(),t([...s,d].slice(0,e-1)),r(b)},[i,n,s,e]),h=a.useCallback(d=>{d.execute(),t(b=>[...b,d].slice(0,e-1)),r([])},[e]);return{undo:o,redo:u,execute:h,canUndo:l,canRedo:i}},rn=()=>{const{t:e}=ne();return a.useMemo(()=>[{label:e("dataGrid.shortcuts.commands.undo"),keys:{Mac:["⌘","Z"],Windows:["Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.redo"),keys:{Mac:["⇧","⌘","Z"],Windows:["Shift","Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.copy"),keys:{Mac:["⌘","C"],Windows:["Ctrl","C"]}},{label:e("dataGrid.shortcuts.commands.paste"),keys:{Mac:["⌘","V"],Windows:["Ctrl","V"]}},{label:e("dataGrid.shortcuts.commands.edit"),keys:{Mac:["↵"],Windows:["Enter"]}},{label:e("dataGrid.shortcuts.commands.delete"),keys:{Mac:["⌫"],Windows:["Backspace"]}},{label:e("dataGrid.shortcuts.commands.clear"),keys:{Mac:["Space"],Windows:["Space"]}},{label:e("dataGrid.shortcuts.commands.moveUp"),keys:{Mac:["↑"],Windows:["↑"]}},{label:e("dataGrid.shortcuts.commands.moveDown"),keys:{Mac:["↓"],Windows:["↓"]}},{label:e("dataGrid.shortcuts.commands.moveLeft"),keys:{Mac:["←"],Windows:["←"]}},{label:e("dataGrid.shortcuts.commands.moveRight"),keys:{Mac:["→"],Windows:["→"]}},{label:e("dataGrid.shortcuts.commands.moveTop"),keys:{Mac:["⌘","↑"],Windows:["Ctrl","↑"]}},{label:e("dataGrid.shortcuts.commands.moveBottom"),keys:{Mac:["⌘","↓"],Windows:["Ctrl","↓"]}},{label:e("dataGrid.shortcuts.commands.selectDown"),keys:{Mac:["⇧","↓"],Windows:["Shift","↓"]}},{label:e("dataGrid.shortcuts.commands.selectUp"),keys:{Mac:["⇧","↑"],Windows:["Shift","↑"]}},{label:e("dataGrid.shortcuts.commands.selectColumnDown"),keys:{Mac:["⇧","⌘","↓"],Windows:["Shift","Ctrl","↓"]}},{label:e("dataGrid.shortcuts.commands.selectColumnUp"),keys:{Mac:["⇧","⌘","↑"],Windows:["Shift","Ctrl","↑"]}},{label:e("dataGrid.shortcuts.commands.focusToolbar"),keys:{Mac:["⌃","⌥",","],Windows:["Ctrl","Alt",","]}},{label:e("dataGrid.shortcuts.commands.focusCancel"),keys:{Mac:["⌃","⌥","."],Windows:["Ctrl","Alt","."]}}],[e])},ln=({open:e,onOpenChange:s})=>{const{t}=ne(),[n,r]=a.useState(""),l=rn(),i=a.useMemo(()=>l.filter(o=>o.label.toLowerCase().includes(n.toLowerCase())),[n,l]);return c.jsxs(Ft,{open:e,onOpenChange:s,children:[c.jsx(Pt,{asChild:!0,children:c.jsx(ae,{size:"small",variant:"secondary",children:t("dataGrid.shortcuts.label")})}),c.jsxs(Rt,{children:[c.jsx(Gt,{className:X("bg-ui-bg-overlay fixed inset-0","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0")}),c.jsxs(Vt,{className:"bg-ui-bg-subtle shadow-elevation-modal fixed left-[50%] top-[50%] flex h-full max-h-[612px] w-full max-w-[560px] translate-x-[-50%] translate-y-[-50%] flex-col divide-y overflow-hidden rounded-lg outline-none",children:[c.jsxs("div",{className:"flex flex-col gap-y-3 px-6 py-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx(Wt,{asChild:!0,children:c.jsx($t,{children:t("app.menus.user.shortcuts")})}),c.jsx(Kt,{className:"sr-only"})]}),c.jsxs("div",{className:"flex items-center gap-x-2",children:[c.jsx(Ue,{children:"esc"}),c.jsx(Bt,{asChild:!0,children:c.jsx(Ht,{variant:"transparent",size:"small",children:c.jsx(Lt,{})})})]})]}),c.jsx("div",{children:c.jsx(Ut,{type:"search",value:n,autoFocus:!0,onChange:o=>r(o.target.value)})})]}),c.jsx("div",{className:"flex flex-col divide-y overflow-y-auto",children:i.map((o,u)=>{var h;return c.jsxs("div",{className:"text-ui-fg-subtle flex items-center justify-between px-6 py-3",children:[c.jsx(Yt,{size:"small",children:o.label}),c.jsx("div",{className:"flex items-center gap-x-1",children:(h=o.keys.Mac)==null?void 0:h.map((d,b)=>c.jsx("div",{className:"flex items-center gap-x-1",children:c.jsx(Ue,{children:d})},b))})]},u)})})]})]})]})},on=40,xt=e=>{const s=e.getIsPinned(),n=document.documentElement.classList.contains("dark")?"rgb(50,50,53)":"rgb(228,228,231)";return{position:s?"sticky":"relative",width:e.getSize(),zIndex:s?1:0,borderBottom:s?`1px solid ${n}`:void 0,borderRight:s?`1px solid ${n}`:void 0,left:s==="left"?`${e.getStart("left")}px`:void 0,right:s==="right"?`${e.getAfter("right")}px`:void 0}},an=({data:e=[],columns:s,state:t,getSubRows:n,onEditingChange:r})=>{var Be,He;const l=a.useRef(null),{redo:i,undo:o,execute:u}=nn(),{register:h,control:d,getValues:b,setValue:p,formState:{errors:x}}=t,[v,g]=a.useState(!0),[f,j]=a.useState(null),[C,E]=a.useState(null),[y,_]=a.useState(null),[T,P]=a.useState(!1),[F,N]=a.useState(!1),[Q,J]=a.useState(!1),[U,Y]=a.useState({}),[G,q]=a.useState({}),R=Xt({data:e,columns:s,initialState:{columnPinning:{left:[s[0].id]}},state:{columnVisibility:U},onColumnVisibilityChange:Y,getSubRows:n,getCoreRowModel:Jt(),defaultColumn:{size:200,maxSize:400}}),{flatRows:H}=R.getRowModel(),ee=R.getAllFlatColumns(),M=a.useMemo(()=>H.filter((k,O)=>(G==null?void 0:G[O])!==!1),[H,G]),m=R.getVisibleLeafColumns(),w=Je({count:M.length,estimateSize:()=>on,getScrollElement:()=>l.current,overscan:5,rangeExtractor:k=>{const O=new Set(Array.from({length:k.endIndex-k.startIndex+1},(W,$)=>k.startIndex+$));return f&&M[f.row]&&O.add(f.row),C&&M[C.row]&&O.add(C.row),Array.from(O).sort((W,$)=>W-$)}}),I=w.getVirtualItems(),S=Je({count:m.length,estimateSize:k=>m[k].getSize(),getScrollElement:()=>l.current,horizontal:!0,overscan:3,rangeExtractor:k=>{const O=k.startIndex,W=k.endIndex,$=new Set(Array.from({length:W-O+1},(le,L)=>O+L));return f&&m[f.col]&&$.add(f.col),C&&m[C.col]&&$.add(C.col),$.add(0),Array.from($).sort((le,L)=>le-L)}}),z=S.getVirtualItems();let D,V;S&&(z!=null&&z.length)&&(D=((Be=z[0])==null?void 0:Be.start)??0,V=S.getTotalSize()-(((He=z[z.length-1])==null?void 0:He.end)??0));const A=a.useMemo(()=>new Is(H,s),[H,s]),Z=Zs(l),K=a.useCallback(k=>{j(k),E(k)},[]),{errorCount:wt,isHighlighted:Ct,toggleErrorHighlighting:Ie}=Ps(A,R,x),yt=a.useCallback(()=>{Ie(G,U,q,Y)},[Ie,G,U]),{columnOptions:jt,handleToggleColumn:ze,handleResetColumns:Et,isDisabled:Mt}=Ts(R,A),kt=a.useCallback(k=>ze(k),[ze]),{navigateToField:De,scrollToCoordinates:Oe}=Ys({matrix:A,queryTool:Z,anchor:f,columnVirtualizer:S,rowVirtualizer:w,flatColumns:ee,setColumnVisibility:Y,setSingleRange:K,visibleColumns:m,visibleRows:M}),{createSnapshot:Ne,restoreSnapshot:St}=Ns({matrix:A,form:t}),ve=a.useCallback(k=>{r&&r(k),k&&Ne(f),J(k)},[f,Ne,r]),{getSelectionValues:be,setSelectionValues:xe}=Rs({matrix:A,form:t,anchor:f}),{handleKeyDownEvent:we,handleSpecialFocusKeys:Ae}=Hs({containerRef:l,matrix:A,queryTool:Z,anchor:f,rangeEnd:C,isEditing:Q,setTrapActive:g,setRangeEnd:E,getSelectionValues:be,getValues:b,setSelectionValues:xe,onEditingChangeHandler:ve,restoreSnapshot:St,setSingleRange:K,scrollToCoordinates:Oe,execute:u,undo:o,redo:i,setValue:p}),{handleMouseUpEvent:Ce}=Us({matrix:A,anchor:f,dragEnd:y,setDragEnd:_,isDragging:F,setIsDragging:N,setRangeEnd:E,setIsSelecting:P,getSelectionValues:be,setSelectionValues:xe,execute:u}),{handleCopyEvent:ye,handlePasteEvent:je}=As({matrix:A,isEditing:Q,anchor:f,rangeEnd:C,getSelectionValues:be,setSelectionValues:xe,execute:u}),{getWrapperFocusHandler:Te,getInputChangeHandler:Fe,getOverlayMouseDownHandler:Pe,getWrapperMouseOverHandler:Re,getIsCellDragSelected:Ge,getIsCellSelected:Ve,onDragToFillStart:_t}=Ds({matrix:A,anchor:f,rangeEnd:C,setRangeEnd:E,isDragging:F,setIsDragging:N,isSelecting:T,setIsSelecting:P,setSingleRange:K,dragEnd:y,setDragEnd:_,setValue:p,execute:u}),{getCellErrorMetadata:We,getCellMetadata:$e}=Os({matrix:A});a.useEffect(()=>{if(v)return window.addEventListener("keydown",we),window.addEventListener("mouseup",Ce),window.addEventListener("copy",ye),window.addEventListener("paste",je),()=>{window.removeEventListener("keydown",we),window.removeEventListener("mouseup",Ce),window.removeEventListener("copy",ye),window.removeEventListener("paste",je)}},[v,we,Ce,ye,je]),a.useEffect(()=>{const k=O=>{if(gt(O)){Ae(O);return}};return window.addEventListener("keydown",k),()=>{window.removeEventListener("keydown",k)}},[Ae]);const It=a.useCallback(k=>{k&&g(!1)},[]);a.useEffect(()=>{f&&(C||E(f))},[f,C]),a.useEffect(()=>{if(!f&&A){const k=A.getFirstNavigableCell();k&&K(k)}},[f,A,K]);const zt=a.useMemo(()=>({anchor:f,control:d,trapActive:v,errors:x,setTrapActive:g,setIsSelecting:P,setIsEditing:ve,setSingleRange:K,setRangeEnd:E,getWrapperFocusHandler:Te,getInputChangeHandler:Fe,getOverlayMouseDownHandler:Pe,getWrapperMouseOverHandler:Re,register:h,getIsCellSelected:Ve,getIsCellDragSelected:Ge,getCellMetadata:$e,getCellErrorMetadata:We,navigateToField:De}),[f,d,v,x,g,P,ve,K,E,Te,Fe,Pe,Re,h,Ve,Ge,$e,We,De]),Ke=a.useCallback(()=>{f&&!v&&(g(!0),K(f),Oe(f,"both"),requestAnimationFrame(()=>{var k;(k=Z==null?void 0:Z.getContainer(f))==null||k.focus()}))},[f,v,Z]);return c.jsx(ht.Provider,{value:zt,children:c.jsxs("div",{className:"bg-ui-bg-subtle flex size-full flex-col",children:[c.jsx(cn,{columnOptions:jt,isDisabled:Mt,onToggleColumn:kt,errorCount:wt,onToggleErrorHighlighting:yt,onResetColumns:Et,isHighlighted:Ct,onHeaderInteractionChange:It}),c.jsx("div",{className:"size-full overflow-hidden",children:c.jsx("div",{ref:l,autoFocus:!0,tabIndex:0,className:"relative h-full select-none overflow-auto outline-none",onFocus:Ke,onClick:Ke,"data-container":!0,role:"application",children:c.jsxs("div",{role:"grid",className:"text-ui-fg-subtle grid",children:[c.jsx("div",{role:"rowgroup",className:"txt-compact-small-plus bg-ui-bg-subtle sticky top-0 z-[1] grid",children:R.getHeaderGroups().map(k=>c.jsxs("div",{role:"row",className:"flex h-10 w-full",children:[D?c.jsx("div",{role:"presentation",style:{display:"flex",width:D}}):null,z.reduce((O,W,$,le)=>{const L=k.headers[W.index],oe=le[$-1];return oe&&W.index!==oe.index+1&&O.push(c.jsx("div",{role:"presentation",style:{display:"flex",width:`${W.start-oe.end}px`}},`padding-${oe.index}-${W.index}`)),O.push(c.jsx("div",{role:"columnheader","data-column-index":W.index,style:{width:L.getSize(),...xt(L.column)},className:"bg-ui-bg-base txt-compact-small-plus flex items-center border-b border-r px-4 py-2.5",children:L.isPlaceholder?null:tt(L.column.columnDef.header,L.getContext())},L.id)),O},[]),V?c.jsx("div",{role:"presentation",style:{display:"flex",width:V}}):null]},k.id))}),c.jsx("div",{role:"rowgroup",className:"relative grid",style:{height:`${w.getTotalSize()}px`},children:I.map(k=>{const O=M[k.index],W=H.findIndex($=>$.id===O.id);return c.jsx(dn,{row:O,rowIndex:W,virtualRow:k,flatColumns:ee,virtualColumns:z,anchor:f,virtualPaddingLeft:D,virtualPaddingRight:V,onDragToFillStart:_t},O.id)})})]})})})]})})},cn=({columnOptions:e,isDisabled:s,onToggleColumn:t,onResetColumns:n,isHighlighted:r,errorCount:l,onToggleErrorHighlighting:i,onHeaderInteractionChange:o})=>{const[u,h]=a.useState(!1),[d,b]=a.useState(!1),{t:p}=ne(),x=e.some(f=>!f.checked),v=f=>{o(f),h(f)},g=f=>{o(f),b(f)};return c.jsxs("div",{className:"bg-ui-bg-base flex items-center justify-between border-b p-4",children:[c.jsxs("div",{className:"flex items-center gap-x-2",children:[c.jsxs(ie,{open:d,onOpenChange:g,children:[c.jsx(Tt,{showTooltip:s,content:p("dataGrid.columns.disabled"),children:c.jsx(ie.Trigger,{asChild:!0,disabled:s,children:c.jsxs(ae,{size:"small",variant:"secondary",children:[x?c.jsx(rt,{}):c.jsx(it,{}),p("dataGrid.columns.view")]})})}),c.jsx(ie.Content,{children:e.map((f,j)=>{const{checked:C,disabled:E,id:y,name:_}=f;return E?null:c.jsx(ie.CheckboxItem,{checked:C,onCheckedChange:t(j),onSelect:T=>T.preventDefault(),children:_},y)})})]}),x&&c.jsx(ae,{size:"small",variant:"transparent",type:"button",onClick:n,className:"text-ui-fg-muted hover:text-ui-fg-subtle","data-id":"reset-columns",children:p("dataGrid.columns.resetToDefault")})]}),c.jsxs("div",{className:"flex items-center gap-x-2",children:[l>0&&c.jsxs(ae,{size:"small",variant:"secondary",type:"button",onClick:i,className:X({"bg-ui-button-neutral-pressed":r}),children:[c.jsx(et,{className:"text-ui-fg-subtle"}),c.jsx("span",{children:p("dataGrid.errors.count",{count:l})})]}),c.jsx(ln,{open:u,onOpenChange:v})]})]})},un=({cell:e,columnIndex:s,rowIndex:t,anchor:n,onDragToFillStart:r})=>{const i=pt({row:t,col:s},n);return c.jsx("div",{role:"gridcell","aria-rowindex":t,"aria-colindex":s,style:{width:e.column.getSize(),...xt(e.column)},"data-row-index":t,"data-column-index":s,className:X("relative flex items-center border-b border-r p-0 outline-none"),tabIndex:-1,children:c.jsxs("div",{className:"relative h-full w-full",children:[tt(e.column.columnDef.cell,{...e.getContext(),columnIndex:s,rowIndex:t}),i&&c.jsx("div",{onMouseDown:r,className:"bg-ui-fg-interactive absolute bottom-0 right-0 z-[3] size-1.5 cursor-ns-resize"})]})})},dn=({row:e,rowIndex:s,virtualRow:t,virtualPaddingLeft:n,virtualPaddingRight:r,virtualColumns:l,flatColumns:i,anchor:o,onDragToFillStart:u})=>{const h=e.getVisibleCells();return c.jsxs("div",{role:"row","aria-rowindex":t.index,style:{transform:`translateY(${t.start}px)`},className:"bg-ui-bg-subtle txt-compact-small absolute flex h-10 w-full",children:[n?c.jsx("div",{role:"presentation",style:{display:"flex",width:n}}):null,l.reduce((d,b,p,x)=>{const v=h[b.index],g=v.column,f=i.findIndex(C=>C.id===g.id),j=x[p-1];return j&&b.index!==j.index+1&&d.push(c.jsx("div",{role:"presentation",style:{display:"flex",width:`${b.start-j.end}px`}},`padding-${j.index}-${b.index}`)),d.push(c.jsx(un,{cell:v,columnIndex:f,rowIndex:s,anchor:o,onDragToFillStart:u},v.id)),d},[]),r?c.jsx("div",{role:"presentation",style:{display:"flex",width:r}}):null]})},hn=({columns:e,rows:s=10})=>{const t=Array.from({length:s},(r,l)=>l),n=e.length;return c.jsxs("div",{className:"bg-ui-bg-subtle size-full",children:[c.jsx("div",{className:"bg-ui-bg-base border-b p-4",children:c.jsx("div",{className:"bg-ui-button-neutral h-7 w-[116px] animate-pulse rounded-md"})}),c.jsxs("div",{className:"bg-ui-bg-subtle size-full overflow-auto",children:[c.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${n}, 1fr)`},children:e.map((r,l)=>c.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:c.jsx(Le,{className:"h-[14px] w-[164px]"})},l))}),c.jsx("div",{children:t.map((r,l)=>c.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${n}, 1fr)`},children:e.map((i,o)=>c.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:c.jsx(Le,{className:"h-[14px] w-[164px]"})},o))},l))})]})]})},fn=({context:e})=>{const{field:s,control:t,renderProps:n}=pe({context:e}),r=re({context:e}),{container:l,input:i}=n;return c.jsx(fe,{control:t,name:s,render:({field:o})=>c.jsx(ge,{...l,...r,children:c.jsx(mn,{field:o,inputProps:i})})})},mn=({field:e,inputProps:s})=>{const{onChange:t,onBlur:n,ref:r,value:l,...i}=e,{ref:o,onBlur:u,onChange:h,...d}=s,[b,p]=a.useState(l);a.useEffect(()=>{p(l)},[l]);const x=me(o,r);return c.jsx("input",{className:X("txt-compact-small text-ui-fg-subtle flex size-full cursor-pointer items-center justify-center bg-transparent outline-none","focus:cursor-text"),autoComplete:"off",tabIndex:-1,value:b,onChange:v=>p(v.target.value),ref:x,onBlur:()=>{n(),u(),h(b,l)},...d,...i})},pn=({isLoading:e,...s})=>{var t;return e?c.jsx(hn,{columns:s.columns,rows:(t=s.data)!=null&&t.length&&s.data.length>0?s.data.length:10}):c.jsx(an,{...s})},yn=Object.assign(pn,{BooleanCell:Js,TextCell:fn,NumberCell:tn,CurrencyCell:ke,ReadonlyCell:Se});function gn(){const e=qt();return{column:({id:s,name:t,header:n,cell:r,disableHiding:l=!1,field:i,type:o})=>e.display({id:s,header:n,cell:r,enableHiding:!l,meta:{name:t,field:i,type:o}})}}var qe=({includesTax:e})=>{const{t:s}=ne();return c.jsx(_e,{maxWidth:999,content:s(e?"general.includesTaxTooltip":"general.excludesTaxTooltip"),children:c.jsx(ut,{className:X("shrink-0",{"text-ui-fg-muted":!e})})})},jn=({currencies:e,regions:s,pricePreferences:t,isReadyOnly:n,getFieldName:r,t:l})=>{const i=gn();return[...(e==null?void 0:e.map(o=>{const u=t==null?void 0:t.find(d=>d.attribute==="currency_code"&&d.value===o),h=l("fields.priceTemplate",{regionOrCurrency:o.toUpperCase()});return i.column({id:`currency_prices.${o}`,name:l("fields.priceTemplate",{regionOrCurrency:o.toUpperCase()}),field:d=>(n==null?void 0:n(d))?null:r(d,o),type:"number",header:()=>c.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[c.jsx("span",{className:"truncate",title:h,children:h}),c.jsx(qe,{includesTax:u==null?void 0:u.is_tax_inclusive})]}),cell:d=>n!=null&&n(d)?c.jsx(Se,{context:d}):c.jsx(ke,{code:o,context:d})})}))??[],...(s==null?void 0:s.map(o=>{const u=t==null?void 0:t.find(d=>d.attribute==="region_id"&&d.value===o.id),h=l("fields.priceTemplate",{regionOrCurrency:o.name});return i.column({id:`region_prices.${o.id}`,name:l("fields.priceTemplate",{regionOrCurrency:o.name}),field:d=>(n==null?void 0:n(d))?null:r(d,o.id),type:"number",header:()=>c.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[c.jsx("span",{className:"truncate",title:h,children:h}),c.jsx(qe,{includesTax:u==null?void 0:u.is_tax_inclusive})]}),cell:d=>n!=null&&n(d)?c.jsx(Se,{context:d}):(e==null?void 0:e.find(p=>p===o.currency_code))?c.jsx(ke,{code:o.currency_code,context:d}):null})}))??[]]};export{yn as D,gn as a,jn as c};
