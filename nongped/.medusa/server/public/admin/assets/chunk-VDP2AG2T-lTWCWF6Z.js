import{u as ue,l as ct}from"./lodash-r6m_RtXk.js";import{u as qt}from"./chunk-HG5TSG3K-BtN5fyyg.js";import{u as Jt,R as X,T as ut,P as Q,C as Z,A as Yt}from"./chunk-KHOKHZC6-CwL1LPjm.js";import{bg as de,bh as dt,bi as M,bj as Wt,bk as pe,bl as Xt,bm as Qt,r as v,bn as fe,j as r,bo as W,bp as pt,bq as Zt,br as ee,bs as D,bt as ea,bu as ta,aD as G,bv as Fe,b as te,a6 as ft,B as aa,m as E,ai as oe,bw as _e,T as Y,z as se,x as ne,bx as J,by as ra}from"./index-CJZ0utKv.js";import{D as Me}from"./date-picker-Celg6WpL.js";import{X as vt}from"./x-mark-mini-ysYOSGAt.js";function sa(){this.__data__=[],this.size=0}var na=sa;function oa(e,t){return e===t||e!==e&&t!==t}var ht=oa,ia=ht;function la(e,t){for(var a=e.length;a--;)if(ia(e[a][0],t))return a;return-1}var ve=la,ca=ve,ua=Array.prototype,da=ua.splice;function pa(e){var t=this.__data__,a=ca(t,e);if(a<0)return!1;var s=t.length-1;return a==s?t.pop():da.call(t,a,1),--this.size,!0}var fa=pa,va=ve;function ha(e){var t=this.__data__,a=va(t,e);return a<0?void 0:t[a][1]}var ga=ha,ma=ve;function ba(e){return ma(this.__data__,e)>-1}var xa=ba,_a=ve;function ya(e,t){var a=this.__data__,s=_a(a,e);return s<0?(++this.size,a.push([e,t])):a[s][1]=t,this}var Ca=ya,ja=na,$a=fa,Sa=ga,wa=xa,Ta=Ca;function K(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var s=e[t];this.set(s[0],s[1])}}K.prototype.clear=ja;K.prototype.delete=$a;K.prototype.get=Sa;K.prototype.has=wa;K.prototype.set=Ta;var he=K,Aa=he;function Oa(){this.__data__=new Aa,this.size=0}var Ia=Oa;function Ra(e){var t=this.__data__,a=t.delete(e);return this.size=t.size,a}var Na=Ra;function Ea(e){return this.__data__.get(e)}var Pa=Ea;function Da(e){return this.__data__.has(e)}var Fa=Da,Ma=de,La=dt,Ga="[object AsyncFunction]",ka="[object Function]",Va="[object GeneratorFunction]",Ka="[object Proxy]";function Ha(e){if(!La(e))return!1;var t=Ma(e);return t==ka||t==Va||t==Ga||t==Ka}var gt=Ha,za=M,Ua=za["__core-js_shared__"],Ba=Ua,ye=Ba,Le=function(){var e=/[^.]+$/.exec(ye&&ye.keys&&ye.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function qa(e){return!!Le&&Le in e}var Ja=qa,Ya=Function.prototype,Wa=Ya.toString;function Xa(e){if(e!=null){try{return Wa.call(e)}catch{}try{return e+""}catch{}}return""}var mt=Xa,Qa=gt,Za=Ja,er=dt,tr=mt,ar=/[\\^$.*+?()[\]{}|]/g,rr=/^\[object .+?Constructor\]$/,sr=Function.prototype,nr=Object.prototype,or=sr.toString,ir=nr.hasOwnProperty,lr=RegExp("^"+or.call(ir).replace(ar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cr(e){if(!er(e)||Za(e))return!1;var t=Qa(e)?lr:rr;return t.test(tr(e))}var ur=cr;function dr(e,t){return e==null?void 0:e[t]}var pr=dr,fr=ur,vr=pr;function hr(e,t){var a=vr(e,t);return fr(a)?a:void 0}var H=hr,gr=H,mr=M,br=gr(mr,"Map"),Ne=br,xr=H,_r=xr(Object,"create"),ge=_r,Ge=ge;function yr(){this.__data__=Ge?Ge(null):{},this.size=0}var Cr=yr;function jr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var $r=jr,Sr=ge,wr="__lodash_hash_undefined__",Tr=Object.prototype,Ar=Tr.hasOwnProperty;function Or(e){var t=this.__data__;if(Sr){var a=t[e];return a===wr?void 0:a}return Ar.call(t,e)?t[e]:void 0}var Ir=Or,Rr=ge,Nr=Object.prototype,Er=Nr.hasOwnProperty;function Pr(e){var t=this.__data__;return Rr?t[e]!==void 0:Er.call(t,e)}var Dr=Pr,Fr=ge,Mr="__lodash_hash_undefined__";function Lr(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Fr&&t===void 0?Mr:t,this}var Gr=Lr,kr=Cr,Vr=$r,Kr=Ir,Hr=Dr,zr=Gr;function z(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var s=e[t];this.set(s[0],s[1])}}z.prototype.clear=kr;z.prototype.delete=Vr;z.prototype.get=Kr;z.prototype.has=Hr;z.prototype.set=zr;var Ur=z,ke=Ur,Br=he,qr=Ne;function Jr(){this.size=0,this.__data__={hash:new ke,map:new(qr||Br),string:new ke}}var Yr=Jr;function Wr(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Xr=Wr,Qr=Xr;function Zr(e,t){var a=e.__data__;return Qr(t)?a[typeof t=="string"?"string":"hash"]:a.map}var me=Zr,es=me;function ts(e){var t=es(this,e).delete(e);return this.size-=t?1:0,t}var as=ts,rs=me;function ss(e){return rs(this,e).get(e)}var ns=ss,os=me;function is(e){return os(this,e).has(e)}var ls=is,cs=me;function us(e,t){var a=cs(this,e),s=a.size;return a.set(e,t),this.size+=a.size==s?0:1,this}var ds=us,ps=Yr,fs=as,vs=ns,hs=ls,gs=ds;function U(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var s=e[t];this.set(s[0],s[1])}}U.prototype.clear=ps;U.prototype.delete=fs;U.prototype.get=vs;U.prototype.has=hs;U.prototype.set=gs;var bt=U,ms=he,bs=Ne,xs=bt,_s=200;function ys(e,t){var a=this.__data__;if(a instanceof ms){var s=a.__data__;if(!bs||s.length<_s-1)return s.push([e,t]),this.size=++a.size,this;a=this.__data__=new xs(s)}return a.set(e,t),this.size=a.size,this}var Cs=ys,js=he,$s=Ia,Ss=Na,ws=Pa,Ts=Fa,As=Cs;function B(e){var t=this.__data__=new js(e);this.size=t.size}B.prototype.clear=$s;B.prototype.delete=Ss;B.prototype.get=ws;B.prototype.has=Ts;B.prototype.set=As;var Os=B,Is="__lodash_hash_undefined__";function Rs(e){return this.__data__.set(e,Is),this}var Ns=Rs;function Es(e){return this.__data__.has(e)}var Ps=Es,Ds=bt,Fs=Ns,Ms=Ps;function ie(e){var t=-1,a=e==null?0:e.length;for(this.__data__=new Ds;++t<a;)this.add(e[t])}ie.prototype.add=ie.prototype.push=Fs;ie.prototype.has=Ms;var Ls=ie;function Gs(e,t){for(var a=-1,s=e==null?0:e.length;++a<s;)if(t(e[a],a,e))return!0;return!1}var ks=Gs;function Vs(e,t){return e.has(t)}var Ks=Vs,Hs=Ls,zs=ks,Us=Ks,Bs=1,qs=2;function Js(e,t,a,s,i,n){var l=a&Bs,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var c=n.get(e),f=n.get(t);if(c&&f)return c==t&&f==e;var g=-1,m=!0,b=a&qs?new Hs:void 0;for(n.set(e,t),n.set(t,e);++g<u;){var o=e[g],p=t[g];if(s)var _=l?s(p,o,g,t,e,n):s(o,p,g,e,t,n);if(_!==void 0){if(_)continue;m=!1;break}if(b){if(!zs(t,function(h,x){if(!Us(b,x)&&(o===h||i(o,h,a,s,n)))return b.push(x)})){m=!1;break}}else if(!(o===p||i(o,p,a,s,n))){m=!1;break}}return n.delete(e),n.delete(t),m}var xt=Js,Ys=M,Ws=Ys.Uint8Array,Xs=Ws;function Qs(e){var t=-1,a=Array(e.size);return e.forEach(function(s,i){a[++t]=[i,s]}),a}var Zs=Qs;function en(e){var t=-1,a=Array(e.size);return e.forEach(function(s){a[++t]=s}),a}var tn=en,Ve=Wt,Ke=Xs,an=ht,rn=xt,sn=Zs,nn=tn,on=1,ln=2,cn="[object Boolean]",un="[object Date]",dn="[object Error]",pn="[object Map]",fn="[object Number]",vn="[object RegExp]",hn="[object Set]",gn="[object String]",mn="[object Symbol]",bn="[object ArrayBuffer]",xn="[object DataView]",He=Ve?Ve.prototype:void 0,Ce=He?He.valueOf:void 0;function _n(e,t,a,s,i,n,l){switch(a){case xn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case bn:return!(e.byteLength!=t.byteLength||!n(new Ke(e),new Ke(t)));case cn:case un:case fn:return an(+e,+t);case dn:return e.name==t.name&&e.message==t.message;case vn:case gn:return e==t+"";case pn:var u=sn;case hn:var d=s&on;if(u||(u=nn),e.size!=t.size&&!d)return!1;var c=l.get(e);if(c)return c==t;s|=ln,l.set(e,t);var f=rn(u(e),u(t),s,i,n,l);return l.delete(e),f;case mn:if(Ce)return Ce.call(e)==Ce.call(t)}return!1}var yn=_n;function Cn(e,t){for(var a=-1,s=t.length,i=e.length;++a<s;)e[i+a]=t[a];return e}var jn=Cn,$n=Array.isArray,Ee=$n,Sn=jn,wn=Ee;function Tn(e,t,a){var s=t(e);return wn(e)?s:Sn(s,a(e))}var An=Tn;function On(e,t){for(var a=-1,s=e==null?0:e.length,i=0,n=[];++a<s;){var l=e[a];t(l,a,e)&&(n[i++]=l)}return n}var In=On;function Rn(){return[]}var Nn=Rn,En=In,Pn=Nn,Dn=Object.prototype,Fn=Dn.propertyIsEnumerable,ze=Object.getOwnPropertySymbols,Mn=ze?function(e){return e==null?[]:(e=Object(e),En(ze(e),function(t){return Fn.call(e,t)}))}:Pn,Ln=Mn;function Gn(e,t){for(var a=-1,s=Array(e);++a<e;)s[a]=t(a);return s}var kn=Gn,Vn=de,Kn=pe,Hn="[object Arguments]";function zn(e){return Kn(e)&&Vn(e)==Hn}var Un=zn,Ue=Un,Bn=pe,_t=Object.prototype,qn=_t.hasOwnProperty,Jn=_t.propertyIsEnumerable,Yn=Ue(function(){return arguments}())?Ue:function(e){return Bn(e)&&qn.call(e,"callee")&&!Jn.call(e,"callee")},Wn=Yn,le={exports:{}};function Xn(){return!1}var Qn=Xn;le.exports;(function(e,t){var a=M,s=Qn,i=t&&!t.nodeType&&t,n=i&&!0&&e&&!e.nodeType&&e,l=n&&n.exports===i,u=l?a.Buffer:void 0,d=u?u.isBuffer:void 0,c=d||s;e.exports=c})(le,le.exports);var yt=le.exports,Zn=9007199254740991,eo=/^(?:0|[1-9]\d*)$/;function to(e,t){var a=typeof e;return t=t??Zn,!!t&&(a=="number"||a!="symbol"&&eo.test(e))&&e>-1&&e%1==0&&e<t}var ao=to,ro=9007199254740991;function so(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ro}var Ct=so,no=de,oo=Ct,io=pe,lo="[object Arguments]",co="[object Array]",uo="[object Boolean]",po="[object Date]",fo="[object Error]",vo="[object Function]",ho="[object Map]",go="[object Number]",mo="[object Object]",bo="[object RegExp]",xo="[object Set]",_o="[object String]",yo="[object WeakMap]",Co="[object ArrayBuffer]",jo="[object DataView]",$o="[object Float32Array]",So="[object Float64Array]",wo="[object Int8Array]",To="[object Int16Array]",Ao="[object Int32Array]",Oo="[object Uint8Array]",Io="[object Uint8ClampedArray]",Ro="[object Uint16Array]",No="[object Uint32Array]",$={};$[$o]=$[So]=$[wo]=$[To]=$[Ao]=$[Oo]=$[Io]=$[Ro]=$[No]=!0;$[lo]=$[co]=$[Co]=$[uo]=$[jo]=$[po]=$[fo]=$[vo]=$[ho]=$[go]=$[mo]=$[bo]=$[xo]=$[_o]=$[yo]=!1;function Eo(e){return io(e)&&oo(e.length)&&!!$[no(e)]}var Po=Eo;function Do(e){return function(t){return e(t)}}var Fo=Do,ce={exports:{}};ce.exports;(function(e,t){var a=Xt,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,n=i&&i.exports===s,l=n&&a.process,u=function(){try{var d=i&&i.require&&i.require("util").types;return d||l&&l.binding&&l.binding("util")}catch{}}();e.exports=u})(ce,ce.exports);var Mo=ce.exports,Lo=Po,Go=Fo,Be=Mo,qe=Be&&Be.isTypedArray,ko=qe?Go(qe):Lo,jt=ko,Vo=kn,Ko=Wn,Ho=Ee,zo=yt,Uo=ao,Bo=jt,qo=Object.prototype,Jo=qo.hasOwnProperty;function Yo(e,t){var a=Ho(e),s=!a&&Ko(e),i=!a&&!s&&zo(e),n=!a&&!s&&!i&&Bo(e),l=a||s||i||n,u=l?Vo(e.length,String):[],d=u.length;for(var c in e)(t||Jo.call(e,c))&&!(l&&(c=="length"||i&&(c=="offset"||c=="parent")||n&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Uo(c,d)))&&u.push(c);return u}var Wo=Yo,Xo=Object.prototype;function Qo(e){var t=e&&e.constructor,a=typeof t=="function"&&t.prototype||Xo;return e===a}var Zo=Qo;function ei(e,t){return function(a){return e(t(a))}}var ti=ei,ai=ti,ri=ai(Object.keys,Object),si=ri,ni=Zo,oi=si,ii=Object.prototype,li=ii.hasOwnProperty;function ci(e){if(!ni(e))return oi(e);var t=[];for(var a in Object(e))li.call(e,a)&&a!="constructor"&&t.push(a);return t}var ui=ci,di=gt,pi=Ct;function fi(e){return e!=null&&pi(e.length)&&!di(e)}var vi=fi,hi=Wo,gi=ui,mi=vi;function bi(e){return mi(e)?hi(e):gi(e)}var xi=bi,_i=An,yi=Ln,Ci=xi;function ji(e){return _i(e,Ci,yi)}var $i=ji,Je=$i,Si=1,wi=Object.prototype,Ti=wi.hasOwnProperty;function Ai(e,t,a,s,i,n){var l=a&Si,u=Je(e),d=u.length,c=Je(t),f=c.length;if(d!=f&&!l)return!1;for(var g=d;g--;){var m=u[g];if(!(l?m in t:Ti.call(t,m)))return!1}var b=n.get(e),o=n.get(t);if(b&&o)return b==t&&o==e;var p=!0;n.set(e,t),n.set(t,e);for(var _=l;++g<d;){m=u[g];var h=e[m],x=t[m];if(s)var S=l?s(x,h,m,t,e,n):s(h,x,m,e,t,n);if(!(S===void 0?h===x||i(h,x,a,s,n):S)){p=!1;break}_||(_=m=="constructor")}if(p&&!_){var w=e.constructor,A=t.constructor;w!=A&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof A=="function"&&A instanceof A)&&(p=!1)}return n.delete(e),n.delete(t),p}var Oi=Ai,Ii=H,Ri=M,Ni=Ii(Ri,"DataView"),Ei=Ni,Pi=H,Di=M,Fi=Pi(Di,"Promise"),Mi=Fi,Li=H,Gi=M,ki=Li(Gi,"Set"),Vi=ki,Ki=H,Hi=M,zi=Ki(Hi,"WeakMap"),Ui=zi,we=Ei,Te=Ne,Ae=Mi,Oe=Vi,Ie=Ui,$t=de,q=mt,Ye="[object Map]",Bi="[object Object]",We="[object Promise]",Xe="[object Set]",Qe="[object WeakMap]",Ze="[object DataView]",qi=q(we),Ji=q(Te),Yi=q(Ae),Wi=q(Oe),Xi=q(Ie),k=$t;(we&&k(new we(new ArrayBuffer(1)))!=Ze||Te&&k(new Te)!=Ye||Ae&&k(Ae.resolve())!=We||Oe&&k(new Oe)!=Xe||Ie&&k(new Ie)!=Qe)&&(k=function(e){var t=$t(e),a=t==Bi?e.constructor:void 0,s=a?q(a):"";if(s)switch(s){case qi:return Ze;case Ji:return Ye;case Yi:return We;case Wi:return Xe;case Xi:return Qe}return t});var Qi=k,je=Os,Zi=xt,el=yn,tl=Oi,et=Qi,tt=Ee,at=yt,al=jt,rl=1,rt="[object Arguments]",st="[object Array]",re="[object Object]",sl=Object.prototype,nt=sl.hasOwnProperty;function nl(e,t,a,s,i,n){var l=tt(e),u=tt(t),d=l?st:et(e),c=u?st:et(t);d=d==rt?re:d,c=c==rt?re:c;var f=d==re,g=c==re,m=d==c;if(m&&at(e)){if(!at(t))return!1;l=!0,f=!1}if(m&&!f)return n||(n=new je),l||al(e)?Zi(e,t,a,s,i,n):el(e,t,d,a,s,i,n);if(!(a&rl)){var b=f&&nt.call(e,"__wrapped__"),o=g&&nt.call(t,"__wrapped__");if(b||o){var p=b?e.value():e,_=o?t.value():t;return n||(n=new je),i(p,_,a,s,n)}}return m?(n||(n=new je),tl(e,t,a,s,i,n)):!1}var ol=nl,il=ol,ot=pe;function St(e,t,a,s,i){return e===t?!0:e==null||t==null||!ot(e)&&!ot(t)?e!==e&&t!==t:il(e,t,a,s,St,i)}var ll=St,cl=ll;function ul(e,t){return cl(e,t)}var dl=ul;const pl=Qt(dl);var wt=v.createContext(null),ae=()=>{const e=v.useContext(wt);if(!e)throw new Error("useDataTableFacetedFilterContext must be used within a DataTableFacetedFilter");return e},fl=({hadPreviousValue:e,label:t,value:a,readonly:s,hasOperator:i,onRemove:n})=>{const{t:l}=te(),u=d=>{d.stopPropagation(),n()};return r.jsxs("div",{className:"bg-ui-bg-field transition-fg shadow-borders-base text-ui-fg-subtle flex cursor-default select-none items-stretch overflow-hidden rounded-md",children:[!e&&r.jsx(Yt,{}),r.jsx("div",{className:E("flex items-center justify-center whitespace-nowrap px-2 py-1",{"border-r":!!(a||e)}),children:r.jsx(Y,{size:"small",weight:"plus",leading:"compact",children:t})}),r.jsxs("div",{className:"flex w-full items-center overflow-hidden",children:[i&&!!(a||e)&&r.jsx("div",{className:"border-r p-1 px-2",children:r.jsx(Y,{size:"small",weight:"plus",leading:"compact",className:"text-ui-fg-muted",children:l("general.is")})}),!!(a||e)&&r.jsx(ut,{asChild:!0,className:E("flex-1 cursor-pointer overflow-hidden border-r p-1 px-2",{"hover:bg-ui-bg-field-hover":!s,"data-[state=open]:bg-ui-bg-field-hover":!s}),children:r.jsx(Y,{size:"small",leading:"compact",weight:"plus",className:"truncate text-nowrap",children:a||" "})})]}),!s&&!!(a||e)&&r.jsx("button",{onClick:u,className:E("text-ui-fg-muted transition-fg flex items-center justify-center p-1","hover:bg-ui-bg-subtle-hover","active:bg-ui-bg-subtle-pressed active:text-ui-fg-base"),children:r.jsx(vt,{})})]})},be=fl,vl=({filter:e,prefix:t,readonly:a,openOnMount:s})=>{const[i,n]=v.useState(s),[l,u]=v.useState(!1),{getFullDate:d}=qt(),{key:c,label:f}=e,{removeFilter:g}=ae(),m=ue({param:c,prefix:t}),b=hl(),o=y=>{m.add(JSON.stringify(y)),u(!1)},p=()=>{m.delete(),u(y=>!y)},_=m.get(),h=gl(_),x=it(h,"$gte"),S=it(h,"$lte"),w=(y,R)=>{const N=R==="start"?"$gte":"$lte",Bt=y?y.toISOString():void 0;m.add(JSON.stringify({...h||{},[N]:Bt}))},A=()=>{const y=b.find(R=>pl(R.value,h));return y==null?void 0:y.label},F=y=>y?d({date:y}):void 0,P=()=>[x,S].map(F).filter(Boolean).join(" - "),T=A()||P(),[L,j]=v.useState(T),I=()=>{m.delete(),g(c)};let O=null;const C=y=>{n(y),j(T),O&&clearTimeout(O),!y&&!_.length&&(O=setTimeout(()=>{g(c)},200))};return r.jsxs(X,{modal:!0,open:i,onOpenChange:C,children:[r.jsx(be,{hadPreviousValue:!!L,label:f,value:T,onRemove:I,readonly:a}),!a&&r.jsx(Q,{children:r.jsxs(Z,{"data-name":"date_filter_content",align:"start",sideOffset:8,collisionPadding:24,className:E("bg-ui-bg-base text-ui-fg-base shadow-elevation-flyout h-full max-h-[var(--radix-popper-available-height)] w-[300px] overflow-auto rounded-lg"),onInteractOutside:y=>{var R;y.target instanceof HTMLElement&&((R=y.target.attributes.getNamedItem("data-name"))==null?void 0:R.value)==="filters_menu_content"&&y.preventDefault()},children:[r.jsxs("ul",{className:"w-full p-1",children:[b.map(y=>{const R=m.get().includes(JSON.stringify(y.value));return r.jsx("li",{children:r.jsxs("button",{className:"bg-ui-bg-base hover:bg-ui-bg-base-hover focus-visible:bg-ui-bg-base-pressed text-ui-fg-base data-[disabled]:text-ui-fg-disabled txt-compact-small relative flex w-full cursor-pointer select-none items-center rounded-md px-2 py-1.5 outline-none transition-colors data-[disabled]:pointer-events-none",type:"button",onClick:()=>{o(y.value)},children:[r.jsx("div",{className:E("transition-fg flex h-5 w-5 items-center justify-center",{"[&_svg]:invisible":!R}),children:r.jsx(oe,{})}),y.label]})},y.label)}),r.jsx("li",{children:r.jsxs("button",{className:"bg-ui-bg-base hover:bg-ui-bg-base-hover focus-visible:bg-ui-bg-base-pressed text-ui-fg-base data-[disabled]:text-ui-fg-disabled txt-compact-small relative flex w-full cursor-pointer select-none items-center rounded-md px-2 py-1.5 outline-none transition-colors data-[disabled]:pointer-events-none",type:"button",onClick:p,children:[r.jsx("div",{className:E("transition-fg flex h-5 w-5 items-center justify-center",{"[&_svg]:invisible":!l}),children:r.jsx(oe,{})}),_e("filters.date.custom")]})})]}),l&&r.jsxs("div",{className:"border-t px-1 pb-3 pt-1",children:[r.jsxs("div",{children:[r.jsx("div",{className:"px-2 py-1",children:r.jsx(Y,{size:"xsmall",leading:"compact",weight:"plus",children:_e("filters.date.from")})}),r.jsx("div",{className:"px-2 py-1",children:r.jsx(Me,{modal:!0,maxValue:S,value:x,onChange:y=>w(y,"start")})})]}),r.jsxs("div",{children:[r.jsx("div",{className:"px-2 py-1",children:r.jsx(Y,{size:"xsmall",leading:"compact",weight:"plus",children:_e("filters.date.to")})}),r.jsx("div",{className:"px-2 py-1",children:r.jsx(Me,{modal:!0,minValue:x,value:S||void 0,onChange:y=>{w(y,"end")}})})]})]})]})})]})},V=new Date;V.setHours(0,0,0,0);var hl=()=>{const{t:e}=te();return v.useMemo(()=>[{label:e("filters.date.today"),value:{$gte:V.toISOString()}},{label:e("filters.date.lastSevenDays"),value:{$gte:new Date(V.getTime()-7*24*60*60*1e3).toISOString()}},{label:e("filters.date.lastThirtyDays"),value:{$gte:new Date(V.getTime()-30*24*60*60*1e3).toISOString()}},{label:e("filters.date.lastNinetyDays"),value:{$gte:new Date(V.getTime()-90*24*60*60*1e3).toISOString()}},{label:e("filters.date.lastTwelveMonths"),value:{$gte:new Date(V.getTime()-365*24*60*60*1e3).toISOString()}}],[e])},gl=e=>e!=null&&e.length?JSON.parse(e.join(",")):null,it=(e,t)=>e!=null&&e[t]?new Date(e[t]):void 0;function ml(e){const t=e+"CollectionProvider",[a,s]=fe(t),[i,n]=a(t,{collectionRef:{current:null},itemMap:new Map}),l=b=>{const{scope:o,children:p}=b,_=G.useRef(null),h=G.useRef(new Map).current;return r.jsx(i,{scope:o,itemMap:h,collectionRef:_,children:p})};l.displayName=t;const u=e+"CollectionSlot",d=G.forwardRef((b,o)=>{const{scope:p,children:_}=b,h=n(u,p),x=W(o,h.collectionRef);return r.jsx(Fe,{ref:x,children:_})});d.displayName=u;const c=e+"CollectionItemSlot",f="data-radix-collection-item",g=G.forwardRef((b,o)=>{const{scope:p,children:_,...h}=b,x=G.useRef(null),S=W(o,x),w=n(c,p);return G.useEffect(()=>(w.itemMap.set(x,{ref:x,...h}),()=>void w.itemMap.delete(x))),r.jsx(Fe,{[f]:"",ref:S,children:_})});g.displayName=c;function m(b){const o=n(e+"CollectionConsumer",b);return G.useCallback(()=>{const _=o.collectionRef.current;if(!_)return[];const h=Array.from(_.querySelectorAll(`[${f}]`));return Array.from(o.itemMap.values()).sort((w,A)=>h.indexOf(w.ref.current)-h.indexOf(A.ref.current))},[o.collectionRef,o.itemMap])}return[{Provider:l,Slot:d,ItemSlot:g},m,s]}var bl=v.createContext(void 0);function Tt(e){const t=v.useContext(bl);return e||t||"ltr"}var $e="rovingFocusGroup.onEntryFocus",xl={bubbles:!1,cancelable:!0},xe="RovingFocusGroup",[Re,At,_l]=ml(xe),[yl,Ot]=fe(xe,[_l]),[Cl,jl]=yl(xe),It=v.forwardRef((e,t)=>r.jsx(Re.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Re.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx($l,{...e,ref:t})})}));It.displayName=xe;var $l=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,orientation:s,loop:i=!1,dir:n,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...g}=e,m=v.useRef(null),b=W(t,m),o=Tt(n),[p=null,_]=pt({prop:l,defaultProp:u,onChange:d}),[h,x]=v.useState(!1),S=Zt(c),w=At(a),A=v.useRef(!1),[F,P]=v.useState(0);return v.useEffect(()=>{const T=m.current;if(T)return T.addEventListener($e,S),()=>T.removeEventListener($e,S)},[S]),r.jsx(Cl,{scope:a,orientation:s,dir:o,loop:i,currentTabStopId:p,onItemFocus:v.useCallback(T=>_(T),[_]),onItemShiftTab:v.useCallback(()=>x(!0),[]),onFocusableItemAdd:v.useCallback(()=>P(T=>T+1),[]),onFocusableItemRemove:v.useCallback(()=>P(T=>T-1),[]),children:r.jsx(ee.div,{tabIndex:h||F===0?-1:0,"data-orientation":s,...g,ref:b,style:{outline:"none",...e.style},onMouseDown:D(e.onMouseDown,()=>{A.current=!0}),onFocus:D(e.onFocus,T=>{const L=!A.current;if(T.target===T.currentTarget&&L&&!h){const j=new CustomEvent($e,xl);if(T.currentTarget.dispatchEvent(j),!j.defaultPrevented){const I=w().filter(N=>N.focusable),O=I.find(N=>N.active),C=I.find(N=>N.id===p),R=[O,C,...I].filter(Boolean).map(N=>N.ref.current);Et(R,f)}}A.current=!1}),onBlur:D(e.onBlur,()=>x(!1))})})}),Rt="RovingFocusGroupItem",Nt=v.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,focusable:s=!0,active:i=!1,tabStopId:n,...l}=e,u=ea(),d=n||u,c=jl(Rt,a),f=c.currentTabStopId===d,g=At(a),{onFocusableItemAdd:m,onFocusableItemRemove:b}=c;return v.useEffect(()=>{if(s)return m(),()=>b()},[s,m,b]),r.jsx(Re.ItemSlot,{scope:a,id:d,focusable:s,active:i,children:r.jsx(ee.span,{tabIndex:f?0:-1,"data-orientation":c.orientation,...l,ref:t,onMouseDown:D(e.onMouseDown,o=>{s?c.onItemFocus(d):o.preventDefault()}),onFocus:D(e.onFocus,()=>c.onItemFocus(d)),onKeyDown:D(e.onKeyDown,o=>{if(o.key==="Tab"&&o.shiftKey){c.onItemShiftTab();return}if(o.target!==o.currentTarget)return;const p=Tl(o,c.orientation,c.dir);if(p!==void 0){if(o.metaKey||o.ctrlKey||o.altKey||o.shiftKey)return;o.preventDefault();let h=g().filter(x=>x.focusable).map(x=>x.ref.current);if(p==="last")h.reverse();else if(p==="prev"||p==="next"){p==="prev"&&h.reverse();const x=h.indexOf(o.currentTarget);h=c.loop?Al(h,x+1):h.slice(x+1)}setTimeout(()=>Et(h))}})})})});Nt.displayName=Rt;var Sl={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function wl(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Tl(e,t,a){const s=wl(e.key,a);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return Sl[s]}function Et(e,t=!1){const a=document.activeElement;for(const s of e)if(s===a||(s.focus({preventScroll:t}),document.activeElement!==a))return}function Al(e,t){return e.map((a,s)=>e[(t+s)%e.length])}var Ol=It,Il=Nt;function Rl(e){const t=v.useRef({value:e,previous:e});return v.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Pe="Radio",[Nl,Pt]=fe(Pe),[El,Pl]=Nl(Pe),Dt=v.forwardRef((e,t)=>{const{__scopeRadio:a,name:s,checked:i=!1,required:n,disabled:l,value:u="on",onCheck:d,...c}=e,[f,g]=v.useState(null),m=W(t,p=>g(p)),b=v.useRef(!1),o=f?!!f.closest("form"):!0;return r.jsxs(El,{scope:a,checked:i,disabled:l,children:[r.jsx(ee.button,{type:"button",role:"radio","aria-checked":i,"data-state":Lt(i),"data-disabled":l?"":void 0,disabled:l,value:u,...c,ref:m,onClick:D(e.onClick,p=>{i||d==null||d(),o&&(b.current=p.isPropagationStopped(),b.current||p.stopPropagation())})}),o&&r.jsx(Dl,{control:f,bubbles:!b.current,name:s,value:u,checked:i,required:n,disabled:l,style:{transform:"translateX(-100%)"}})]})});Dt.displayName=Pe;var Ft="RadioIndicator",Mt=v.forwardRef((e,t)=>{const{__scopeRadio:a,forceMount:s,...i}=e,n=Pl(Ft,a);return r.jsx(ta,{present:s||n.checked,children:r.jsx(ee.span,{"data-state":Lt(n.checked),"data-disabled":n.disabled?"":void 0,...i,ref:t})})});Mt.displayName=Ft;var Dl=e=>{const{control:t,checked:a,bubbles:s=!0,...i}=e,n=v.useRef(null),l=Rl(a),u=Jt(t);return v.useEffect(()=>{const d=n.current,c=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(c,"checked").set;if(l!==a&&g){const m=new Event("click",{bubbles:s});g.call(d,a),d.dispatchEvent(m)}},[l,a,s]),r.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:a,...i,tabIndex:-1,ref:n,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Lt(e){return e?"checked":"unchecked"}var Fl=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],De="RadioGroup",[Ml,ac]=fe(De,[Ot,Pt]),Gt=Ot(),kt=Pt(),[Ll,Gl]=Ml(De),Vt=v.forwardRef((e,t)=>{const{__scopeRadioGroup:a,name:s,defaultValue:i,value:n,required:l=!1,disabled:u=!1,orientation:d,dir:c,loop:f=!0,onValueChange:g,...m}=e,b=Gt(a),o=Tt(c),[p,_]=pt({prop:n,defaultProp:i,onChange:g});return r.jsx(Ll,{scope:a,name:s,required:l,disabled:u,value:p,onValueChange:_,children:r.jsx(Ol,{asChild:!0,...b,orientation:d,dir:o,loop:f,children:r.jsx(ee.div,{role:"radiogroup","aria-required":l,"aria-orientation":d,"data-disabled":u?"":void 0,dir:o,...m,ref:t})})})});Vt.displayName=De;var Kt="RadioGroupItem",Ht=v.forwardRef((e,t)=>{const{__scopeRadioGroup:a,disabled:s,...i}=e,n=Gl(Kt,a),l=n.disabled||s,u=Gt(a),d=kt(a),c=v.useRef(null),f=W(t,c),g=n.value===i.value,m=v.useRef(!1);return v.useEffect(()=>{const b=p=>{Fl.includes(p.key)&&(m.current=!0)},o=()=>m.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",o),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",o)}},[]),r.jsx(Il,{asChild:!0,...u,focusable:!l,active:g,children:r.jsx(Dt,{disabled:l,required:n.required,checked:g,...d,...i,name:n.name,ref:f,onCheck:()=>n.onValueChange(i.value),onKeyDown:D(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:D(i.onFocus,()=>{var b;m.current&&((b=c.current)==null||b.click())})})})});Ht.displayName=Kt;var kl="RadioGroupIndicator",zt=v.forwardRef((e,t)=>{const{__scopeRadioGroup:a,...s}=e,i=kt(a);return r.jsx(Mt,{...i,...s,ref:t})});zt.displayName=kl;var Vl=Vt,Kl=Ht,Hl=zt,zl=({filter:e,prefix:t,readonly:a,openOnMount:s})=>{const{t:i}=te(),[n,l]=v.useState(s),{key:u,label:d}=e,{removeFilter:c}=ae(),f=ue({param:u,prefix:t,multiple:!1}),g=f.get(),[m,b]=v.useState(g),[o,p]=v.useState(Ul(g)),_=v.useCallback(ct.debounce((j,I)=>{const O=j.target.value,C=JSON.parse((g==null?void 0:g.join(","))||"{}"),y=!isNaN(Number(C)),R=N=>{if(!O&&y){f.delete();return}if(C&&!O){delete C[N],f.add(JSON.stringify(C));return}if(!C){f.add(JSON.stringify({[N]:O}));return}f.add(JSON.stringify({...C,[N]:O}))};switch(I){case"eq":O?f.add(O):f.delete();break;case"lt":case"gt":R(I);break}},500),[f,g]);v.useEffect(()=>()=>{_.cancel()},[_]);let h=null;const x=j=>{l(j),b(g),h&&clearTimeout(h),!j&&!g.length&&(h=setTimeout(()=>{c(u)},200))},S=()=>{f.delete(),c(u)},w=[{operator:"exact",label:i("filters.compare.exact")},{operator:"range",label:i("filters.compare.range")}],A=`${u}-gt`,F=`${u}-lt`,P=u,T=lt(g,i),L=lt(m,i);return r.jsxs(X,{modal:!0,open:n,onOpenChange:x,children:[r.jsx(be,{hasOperator:!0,hadPreviousValue:!!L,label:d,value:T,onRemove:S,readonly:a}),!a&&r.jsx(Q,{children:r.jsxs(Z,{"data-name":"number_filter_content",align:"start",sideOffset:8,collisionPadding:24,className:E("bg-ui-bg-base text-ui-fg-base shadow-elevation-flyout max-h-[var(--radix-popper-available-height)] w-[300px] divide-y overflow-y-auto rounded-lg outline-none"),onInteractOutside:j=>{var I;j.target instanceof HTMLElement&&((I=j.target.attributes.getNamedItem("data-name"))==null?void 0:I.value)==="filters_menu_content"&&j.preventDefault()},children:[r.jsx("div",{className:"p-1",children:r.jsx(Vl,{value:o,onValueChange:j=>p(j),className:"flex flex-col items-start",orientation:"vertical",autoFocus:!0,children:w.map(j=>r.jsxs(Kl,{value:j.operator,className:"txt-compact-small hover:bg-ui-bg-base-hover focus-visible:bg-ui-bg-base-hover active:bg-ui-bg-base-pressed transition-fg grid w-full grid-cols-[20px_1fr] gap-2 rounded-[4px] px-2 py-1.5 text-left outline-none",children:[r.jsx("div",{className:"size-5",children:r.jsx(Hl,{children:r.jsx(oe,{})})}),r.jsx("span",{className:"w-full",children:j.label})]},j.operator))})}),r.jsx("div",{children:o==="range"?r.jsxs("div",{className:"px-1 pb-3 pt-1",children:[r.jsx("div",{className:"px-2 py-1.5",children:r.jsx(se,{size:"xsmall",weight:"plus",htmlFor:A,children:i("filters.compare.greaterThan")})}),r.jsx("div",{className:"px-2 py-0.5",children:r.jsx(ne,{name:A,size:"small",type:"number",defaultValue:Se(g,"gt"),onChange:j=>_(j,"gt")})}),r.jsx("div",{className:"px-2 py-1.5",children:r.jsx(se,{size:"xsmall",weight:"plus",htmlFor:F,children:i("filters.compare.lessThan")})}),r.jsx("div",{className:"px-2 py-0.5",children:r.jsx(ne,{name:F,size:"small",type:"number",defaultValue:Se(g,"lt"),onChange:j=>_(j,"lt")})})]},"range"):r.jsxs("div",{className:"px-1 pb-3 pt-1",children:[r.jsx("div",{className:"px-2 py-1.5",children:r.jsx(se,{size:"xsmall",weight:"plus",htmlFor:P,children:d})}),r.jsx("div",{className:"px-2 py-0.5",children:r.jsx(ne,{name:P,size:"small",type:"number",defaultValue:Se(g,"eq"),onChange:j=>_(j,"eq")})})]},"exact")})]})})]})},lt=(e,t)=>{const a=JSON.parse((e==null?void 0:e.join(","))||"{}");let s="";if(typeof a=="object"){const i=[];a.gt&&i.push(t("filters.compare.greaterThanLabel",{value:a.gt})),a.lt&&i.push(t("filters.compare.lessThanLabel",{value:a.lt})),s=i.join(` ${t("filters.compare.andLabel")} `)}return typeof a=="number"&&(s=a.toString()),s},Ut=e=>{if(!e)return;const t=e.join(",");if(t)return JSON.parse(t)},Se=(e,t)=>{const a=Ut(e);if(typeof a=="object")return a[t];if(typeof a=="number"&&t==="eq")return a},Ul=e=>typeof Ut(e)=="object"?"range":"exact",Bl=({filter:e,prefix:t,readonly:a,multiple:s,searchable:i,options:n,openOnMount:l})=>{const[u,d]=v.useState(l),[c,f]=v.useState(""),[g,m]=v.useState(null),{t:b}=te(),{removeFilter:o}=ae(),{key:p,label:_}=e,h=ue({param:p,prefix:t,multiple:s}),x=h.get(),S=x.map(C=>{var y;return(y=n.find(R=>R.value===C))==null?void 0:y.label}).filter(Boolean),[w,A]=v.useState(S),F=()=>{h.delete(),o(p)};let P=null;const T=C=>{d(C),A(S),P&&clearTimeout(P),!C&&!x.length&&(P=setTimeout(()=>{o(p)},200))},L=()=>{f(""),g&&g.focus()},j=C=>{h.get().includes(String(C))?h.delete(String(C)):h.add(String(C))},I=S?Array.isArray(S)?S:[S]:null,O=w?Array.isArray(w)?w:[w]:null;return r.jsxs(X,{modal:!0,open:u,onOpenChange:T,children:[r.jsx(be,{hasOperator:!0,hadPreviousValue:!!(O!=null&&O.length),readonly:a,label:_,value:I==null?void 0:I.join(", "),onRemove:F}),!a&&r.jsx(Q,{children:r.jsx(Z,{hideWhenDetached:!0,align:"start",sideOffset:8,collisionPadding:8,className:E("bg-ui-bg-base text-ui-fg-base shadow-elevation-flyout z-[1] h-full max-h-[200px] w-[300px] overflow-hidden rounded-lg outline-none"),onInteractOutside:C=>{var y;C.target instanceof HTMLElement&&((y=C.target.attributes.getNamedItem("data-name"))==null?void 0:y.value)==="filters_menu_content"&&(C.preventDefault(),C.stopPropagation())},children:r.jsxs(J,{className:"h-full",children:[i&&r.jsx("div",{className:"border-b p-1",children:r.jsxs("div",{className:"grid grid-cols-[1fr_20px] gap-x-2 rounded-md px-2 py-1",children:[r.jsx(J.Input,{ref:m,value:c,onValueChange:f,className:"txt-compact-small placeholder:text-ui-fg-muted bg-transparent outline-none",placeholder:"Search"}),r.jsx("div",{className:"flex h-5 w-5 items-center justify-center",children:r.jsx("button",{disabled:!c,onClick:L,className:E("transition-fg text-ui-fg-muted focus-visible:bg-ui-bg-base-pressed rounded-md outline-none",{invisible:!c}),children:r.jsx(vt,{})})})]})}),r.jsx(J.Empty,{className:"txt-compact-small flex items-center justify-center p-1",children:r.jsx("span",{className:"w-full px-2 py-1 text-center",children:b("general.noResultsTitle")})}),r.jsx(J.List,{className:"h-full max-h-[163px] min-h-[0] overflow-auto p-1 outline-none",children:n.map(C=>{const y=h.get().includes(String(C.value));return r.jsxs(J.Item,{className:"bg-ui-bg-base hover:bg-ui-bg-base-hover aria-selected:bg-ui-bg-base-pressed focus-visible:bg-ui-bg-base-pressed text-ui-fg-base data-[disabled]:text-ui-fg-disabled txt-compact-small relative flex cursor-pointer select-none items-center gap-x-2 rounded-md px-2 py-1.5 outline-none transition-colors data-[disabled]:pointer-events-none",value:C.label,onSelect:()=>{j(C.value)},children:[r.jsx("div",{className:E("transition-fg flex h-5 w-5 items-center justify-center",{"[&_svg]:invisible":!y}),children:s?r.jsx(ra,{}):r.jsx(oe,{})}),C.label]},String(C.value))})})]})})})]})},ql=({filter:e,prefix:t,readonly:a,openOnMount:s})=>{const[i,n]=v.useState(s),{key:l,label:u}=e,{removeFilter:d}=ae(),c=ue({param:l,prefix:t}),f=c.get(),[g,m]=v.useState(f==null?void 0:f[0]),b=v.useCallback(ct.debounce(h=>{const x=h.target.value;x?c.add(x):c.delete()},500),[c]);v.useEffect(()=>()=>{b.cancel()},[b]);let o=null;const p=h=>{n(h),m(f==null?void 0:f[0]),o&&clearTimeout(o),!h&&!f.length&&(o=setTimeout(()=>{d(l)},200))},_=()=>{c.delete(),d(l)};return r.jsxs(X,{modal:!0,open:i,onOpenChange:p,children:[r.jsx(be,{hasOperator:!0,hadPreviousValue:!!g,label:u,value:f==null?void 0:f[0],onRemove:_,readonly:a}),!a&&r.jsx(Q,{children:r.jsx(Z,{hideWhenDetached:!0,align:"start",sideOffset:8,collisionPadding:8,className:E("bg-ui-bg-base text-ui-fg-base shadow-elevation-flyout z-[1] h-full max-h-[200px] w-[300px] overflow-hidden rounded-lg outline-none"),onInteractOutside:h=>{var x;h.target instanceof HTMLElement&&((x=h.target.attributes.getNamedItem("data-name"))==null?void 0:x.value)==="filters_menu_content"&&(h.preventDefault(),h.stopPropagation())},children:r.jsxs("div",{className:"px-1 pb-3 pt-1",children:[r.jsx("div",{className:"px-2 py-1.5",children:r.jsx(se,{size:"xsmall",weight:"plus",htmlFor:l,children:u})}),r.jsx("div",{className:"px-2 py-0.5",children:r.jsx(ne,{name:l,size:"small",defaultValue:(f==null?void 0:f[0])||void 0,onChange:b})})]})})})]})},rc=({filters:e,readonly:t,prefix:a})=>{const{t:s}=te(),[i]=ft(),[n,l]=v.useState(!1),[u,d]=v.useState(Yl({searchParams:i,filters:e,prefix:a})),c=e.filter(o=>!u.find(p=>p.key===o.key)),f=v.useRef(!0);v.useEffect(()=>{if(f.current){const o=new URLSearchParams(i);e.forEach(p=>{const _=a?`${a}_${p.key}`:p.key;o.get(_)&&!u.find(x=>x.key===p.key)&&(p.type==="select"?d(x=>[...x,{...p,multiple:p.multiple,options:p.options,openOnMount:!1}]):d(x=>[...x,{...p,openOnMount:!1}]))})}f.current=!1},[u,e,a,i]);const g=o=>{l(!1),d(p=>[...p,{...o,openOnMount:!0}])},m=v.useCallback(o=>{d(p=>p.filter(_=>_.key!==o))},[]),b=v.useCallback(()=>{d([])},[]);return r.jsx(wt.Provider,{value:v.useMemo(()=>({removeFilter:m,removeAllFilters:b}),[b,m]),children:r.jsxs("div",{className:"max-w-2/3 flex flex-wrap items-center gap-2",children:[u.map(o=>{switch(o.type){case"select":return r.jsx(Bl,{filter:o,prefix:a,readonly:t,options:o.options,multiple:o.multiple,searchable:o.searchable,openOnMount:o.openOnMount},o.key);case"date":return r.jsx(vl,{filter:o,prefix:a,readonly:t,openOnMount:o.openOnMount},o.key);case"string":return r.jsx(ql,{filter:o,prefix:a,readonly:t,openOnMount:o.openOnMount},o.key);case"number":return r.jsx(zl,{filter:o,prefix:a,readonly:t,openOnMount:o.openOnMount},o.key)}}),!t&&c.length>0&&r.jsxs(X,{modal:!0,open:n,onOpenChange:l,children:[r.jsx(ut,{asChild:!0,id:"filters_menu_trigger",children:r.jsx(aa,{size:"small",variant:"secondary",children:s("filters.addFilter")})}),r.jsx(Q,{children:r.jsx(Z,{className:E("bg-ui-bg-base text-ui-fg-base shadow-elevation-flyout z-[1] h-full max-h-[200px] w-[300px] overflow-auto rounded-lg p-1 outline-none"),"data-name":"filters_menu_content",align:"start",sideOffset:8,collisionPadding:8,onCloseAutoFocus:o=>{u.find(_=>_.openOnMount)&&o.preventDefault()},children:c.map(o=>r.jsx("div",{className:"bg-ui-bg-base hover:bg-ui-bg-base-hover focus-visible:bg-ui-bg-base-pressed text-ui-fg-base data-[disabled]:text-ui-fg-disabled txt-compact-small relative flex cursor-pointer select-none items-center rounded-md px-2 py-1.5 outline-none transition-colors data-[disabled]:pointer-events-none",role:"menuitem",onClick:()=>{g(o)},children:o.label},o.key))})})]}),!t&&u.length>0&&r.jsx(Jl,{filters:e,prefix:a})]})})},Jl=({filters:e,prefix:t})=>{const{removeAllFilters:a}=ae(),[s,i]=ft(),n=()=>{i(l=>{const u=new URLSearchParams(l);return e.forEach(d=>{u.delete(t?`${t}_${d.key}`:d.key)}),u}),a()};return r.jsx("button",{type:"button",onClick:n,className:E("text-ui-fg-muted transition-fg txt-compact-small-plus rounded-md px-2 py-1","hover:text-ui-fg-subtle","focus-visible:shadow-borders-focus"),children:"Clear all"})},Yl=({searchParams:e,filters:t,prefix:a})=>{const s=new URLSearchParams(e),i=[];return t.forEach(n=>{const l=a?`${a}_${n.key}`:n.key;s.get(l)&&(n.type==="select"?i.push({...n,multiple:n.multiple,options:n.options,openOnMount:!1}):i.push({...n,openOnMount:!1}))}),i};export{rc as D};
